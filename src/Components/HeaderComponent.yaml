ComponentDefinitions:
  HeaderComponent:
    DefinitionType: CanvasComponent
    CustomProperties:
      UserName:
        PropertyKind: Input
        DisplayName: UserName
        Description: "Tên người dùng"
        DataType: Text
        Default: ="Nguyễn Văn An"
      UserRole:
        PropertyKind: Input
        DisplayName: UserRole
        Description: "Vai trò người dùng"
        DataType: Text
        Default: ="Employee"
      ShowSearch:
        PropertyKind: Input
        DisplayName: ShowSearch
        Description: "Hiển thị thanh tìm kiếm"
        DataType: Boolean
        Default: =true
      ShowNotification:
        PropertyKind: Input
        DisplayName: ShowNotification
        Description: "Hiển thị thông báo"
        DataType: Boolean
        Default: =true
      NotificationCount:
        PropertyKind: Input
        DisplayName: NotificationCount
        Description: "Số lượng thông báo"
        DataType: Number
        Default: =0
      OnSearch:
        PropertyKind: Event
        DisplayName: OnSearch
        Description: "Sự kiện khi tìm kiếm"
        ReturnType: None
        Default: =false
        Parameters:
          - SearchText:
              Description: "Nội dung tìm kiếm"
              DataType: Text
              IsOptional: true
              Default: =""
    Properties:
      Height: =App.Height
      Width: =App.Width
    Children:
      - 'Header.Container':
          Control: Rectangle
          Variant: ManualLayout
          Properties:
            X: =Parent.X
            Y: =Parent.Y
            Width: =Parent.Width
            Height: =Parent.Height * 0.06
            Fill: =RGBA(227, 242, 253, 1)
            BorderColor: =RGBA(187, 222, 251, 1)
            BorderThickness: =Parent.Height * 0.0005
            DropShadow: =DropShadow.Semilight
          Children:
            # Brand/Logo Section - Compact
            - 'Header.Brand.Container':
                Control: Rectangle
                Variant: ManualLayout
                Properties:
                  X: =Parent.X + Parent.Width * 0.015
                  Y: =(Parent.Height - Self.Height) / 2
                  Width: =Parent.Width * 0.2
                  Height: =Parent.Height * 0.7
                Children:
                  - 'Header.Brand.Icon':
                      Control: Classic/Icon
                      Properties:
                        X: =Parent.X
                        Y: =(Parent.Height - Self.Height) / 2
                        Width: =Parent.Height * 0.6
                        Height: =Parent.Height * 0.6
                        Icon: =Icon.CalendarBlank
                        Color: =RGBA(33, 150, 243, 1)
                        
                  - 'Header.Brand.Text':
                      Control: Label
                      Properties:
                        X: ='Header.Brand.Icon'.X + 'Header.Brand.Icon'.Width + Parent.Width * 0.03
                        Y: =(Parent.Height - Self.Height) / 2
                        Width: =Parent.Width * 0.75
                        Height: =Parent.Height * 0.5
                        Text: ="Leave App"
                        Color: =RGBA(55, 65, 81, 1)
                        Font: =Font.'Open Sans'
                        FontWeight: =FontWeight.Semibold
                        Size: =Parent.Height * 0.35
                        
            # Search Bar Section - Compact (Desktop only)
            - 'Header.Search.Container':
                Control: Rectangle
                Variant: ManualLayout
                Properties:
                  X: ='Header.Brand.Container'.X + 'Header.Brand.Container'.Width + Parent.Width * 0.015
                  Y: =(Parent.Height - Self.Height) / 2
                  Width: =Parent.Width * 0.25
                  Height: =Parent.Height * 0.55
                  Fill: =RGBA(255, 255, 255, 0.8)
                  BorderColor: =RGBA(224, 224, 224, 1)
                  BorderThickness: =Parent.Height * 0.001
                  Visible: =And(HeaderComponent.ShowSearch, App.Width >= 768)
                Children:
                  - 'Header.Search.Icon':
                      Control: Classic/Icon
                      Properties:
                        X: =Parent.X + Parent.Width * 0.03
                        Y: =(Parent.Height - Self.Height) / 2
                        Width: =Parent.Height * 0.4
                        Height: =Parent.Height * 0.4
                        Icon: =Icon.Search
                        Color: =RGBA(158, 158, 158, 1)
                        
                  - 'Header.Search.Input':
                      Control: Classic/TextInput
                      Properties:
                        X: ='Header.Search.Icon'.X + 'Header.Search.Icon'.Width + Parent.Width * 0.02
                        Y: =Parent.Y
                        Width: =Parent.Width * 0.8
                        Height: =Parent.Height
                        HintText: ="Tìm kiếm..."
                        Color: =RGBA(55, 65, 81, 1)
                        Fill: =RGBA(0, 0, 0, 0)
                        BorderThickness: =Parent.Height * 0.001
                        BorderColor: =RGBA(0, 0, 0, 0)
                        Font: =Font.'Open Sans'
                        Size: =Parent.Height * 0.3
                        OnChange: =HeaderComponent.OnSearch()
                        
            # User Info and Actions Section - Compact
            - 'Header.Actions.Container':
                Control: Rectangle
                Variant: ManualLayout
                Properties:
                  X: =Parent.Width - Self.Width - Parent.Width * 0.015
                  Y: =Parent.Y
                  Width: =Parent.Width * 0.3
                  Height: =Parent.Height
                Children:
                  # Notification Bell - Smaller
                  - 'Header.Notification.Container':
                      Control: Rectangle
                      Variant: ManualLayout
                      Properties:
                        X: =Parent.X
                        Y: =(Parent.Height - Self.Height) / 2
                        Width: =Parent.Height * 0.65
                        Height: =Parent.Height * 0.65
                        Fill: =RGBA(248, 250, 252, 1)
                        BorderColor: =RGBA(229, 231, 235, 1)
                        BorderThickness: =Parent.Height * 0.001
                        Visible: =HeaderComponent.ShowNotification
                      Children:
                        - 'Header.Notification.Icon':
                            Control: Classic/Icon
                            Properties:
                              X: =(Parent.Width - Self.Width) / 2
                              Y: =(Parent.Height - Self.Height) / 2
                              Width: =Parent.Height * 0.45
                              Height: =Parent.Height * 0.45
                              Icon: =Icon.Bell
                              Color: =RGBA(107, 114, 128, 1)
                              
                        - 'Header.Notification.Badge':
                            Control: Circle
                            Properties:
                              X: =Parent.Width * 0.6
                              Y: =Parent.Height * 0.1
                              Width: =Parent.Height * 0.3
                              Height: =Parent.Height * 0.3
                              Fill: =RGBA(255, 205, 210, 1)
                              Visible: =And(HeaderComponent.ShowNotification, HeaderComponent.NotificationCount > 0)
                              
                        - 'Header.Notification.Count':
                            Control: Label
                            Properties:
                              X: ='Header.Notification.Badge'.X
                              Y: ='Header.Notification.Badge'.Y
                              Width: ='Header.Notification.Badge'.Width
                              Height: ='Header.Notification.Badge'.Height
                              Text: =If(HeaderComponent.NotificationCount > 9, "9+", Text(HeaderComponent.NotificationCount))
                              Color: =RGBA(183, 28, 28, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =Parent.Height * 0.12
                              Align: =Align.Center
                              Visible: =And(HeaderComponent.ShowNotification, HeaderComponent.NotificationCount > 0)
                              
                  # User Profile Section - Compact
                  - 'Header.UserProfile.Container':
                      Control: Rectangle
                      Variant: ManualLayout
                      Properties:
                        X: ='Header.Notification.Container'.X + 'Header.Notification.Container'.Width + Parent.Width * 0.02
                        Y: =(Parent.Height - Self.Height) / 2
                        Width: =Parent.Width * 0.75
                        Height: =Parent.Height * 0.7
                        Fill: =RGBA(248, 250, 252, 1)
                        BorderColor: =RGBA(229, 231, 235, 1)
                        BorderThickness: =Parent.Height * 0.001
                      Children:
                        # User Avatar - Smaller
                        - 'Header.User.Avatar.Background':
                            Control: Circle
                            Properties:
                              X: =Parent.X + Parent.Width * 0.03
                              Y: =(Parent.Height - Self.Height) / 2
                              Width: =Parent.Height * 0.6
                              Height: =Parent.Height * 0.6
                              Fill: =RGBA(187, 222, 251, 1)
                              
                        - 'Header.User.Avatar.Initials':
                            Control: Label
                            Properties:
                              X: ='Header.User.Avatar.Background'.X
                              Y: ='Header.User.Avatar.Background'.Y
                              Width: ='Header.User.Avatar.Background'.Width
                              Height: ='Header.User.Avatar.Background'.Height
                              Text: =Upper(Left(HeaderComponent.UserName, 1) & If(Find(" ", HeaderComponent.UserName) > 0, Mid(HeaderComponent.UserName, Find(" ", HeaderComponent.UserName) + 1, 1), ""))
                              Color: =RGBA(33, 150, 243, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =Parent.Height * 0.22
                              Align: =Align.Center
                              
                        # User Info Text - Compact
                        - 'Header.User.Info.Container':
                            Control: Rectangle
                            Variant: ManualLayout
                            Properties:
                              X: ='Header.User.Avatar.Background'.X + 'Header.User.Avatar.Background'.Width + Parent.Width * 0.03
                              Y: =Parent.Y
                              Width: =Parent.Width * 0.7
                              Height: =Parent.Height
                            Children:
                              - 'Header.User.Name':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X
                                    Y: =Parent.Y + Parent.Height * 0.1
                                    Width: =Parent.Width * 0.9
                                    Height: =Parent.Height * 0.45
                                    Text: =HeaderComponent.UserName
                                    Color: =RGBA(55, 65, 81, 1)
                                    Font: =Font.'Open Sans'
                                    FontWeight: =FontWeight.Semibold
                                    Size: =Parent.Height * 0.16
                                    
                              - 'Header.User.Role':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X
                                    Y: ='Header.User.Name'.Y + 'Header.User.Name'.Height
                                    Width: =Parent.Width * 0.9
                                    Height: =Parent.Height * 0.35
                                    Text: =Switch(HeaderComponent.UserRole,
                                      "Admin", "Quản trị viên",
                                      "HR", "Nhân sự",
                                      "Director", "Giám đốc",
                                      "Manager", "Quản lý",
                                      "Employee", "Nhân viên",
                                      HeaderComponent.UserRole)
                                    Color: =RGBA(107, 114, 128, 1)
                                    Font: =Font.'Open Sans'
                                    Size: =Parent.Height * 0.12
                                    
                              # Status Indicator - Smaller
                              - 'Header.User.Status':
                                  Control: Circle
                                  Properties:
                                    X: =Parent.Width * 0.85
                                    Y: =Parent.Y + Parent.Height * 0.15
                                    Width: =Parent.Height * 0.12
                                    Height: =Parent.Height * 0.12
                                    Fill: =RGBA(200, 230, 201, 1)
                                    
            # Mobile Menu Button (Mobile only) - Compact
            - 'Header.Mobile.MenuButton':
                Control: Classic/Button
                Properties:
                  X: =Parent.Width - Self.Width - Parent.Width * 0.015
                  Y: =(Parent.Height - Self.Height) / 2
                  Width: =Parent.Height * 0.5
                  Height: =Parent.Height * 0.5
                  Text: ="☰"
                  Fill: =RGBA(248, 250, 252, 1)
                  Color: =RGBA(107, 114, 128, 1)
                  BorderColor: =RGBA(229, 231, 235, 1)
                  BorderThickness: =Parent.Height * 0.001
                  Font: =Font.'Open Sans'
                  FontWeight: =FontWeight.Bold
                  Size: =Parent.Height * 0.2
                  Visible: =App.Width < 768
                  OnSelect: =Set(varMobileMenuOpen, !varMobileMenuOpen) 