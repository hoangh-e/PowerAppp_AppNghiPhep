ComponentDefinitions:
  NavigationComponent:
    DefinitionType: CanvasComponent
    CustomProperties:
      UserRole:
        PropertyKind: Input
        DisplayName: UserRole
        Description: "Vai trò của người dùng"
        DataType: Text
        Default: ="Employee"
      ActiveScreen:
        PropertyKind: Input
        DisplayName: ActiveScreen
        Description: "Màn hình hiện tại"
        DataType: Text
        Default: =""
      IsCollapsed:
        PropertyKind: Input
        DisplayName: IsCollapsed
        Description: "Trạng thái thu gọn navigation"
        DataType: Boolean
        Default: =false
      DashboardScreen:
        PropertyKind: Input
        DisplayName: DashboardScreen
        Description: "Reference đến DashboardScreen"
        DataType: Screen
        Default: =
      LeaveRequestScreen:
        PropertyKind: Input
        DisplayName: LeaveRequestScreen
        Description: "Reference đến LeaveRequestScreen"
        DataType: Screen
        Default: =
      MyLeavesScreen:
        PropertyKind: Input
        DisplayName: MyLeavesScreen
        Description: "Reference đến MyLeavesScreen"
        DataType: Screen
        Default: =
      CalendarScreen:
        PropertyKind: Input
        DisplayName: CalendarScreen
        Description: "Reference đến CalendarScreen"
        DataType: Screen
        Default: =
      ManagementScreen:
        PropertyKind: Input
        DisplayName: ManagementScreen
        Description: "Reference đến ManagementScreen"
        DataType: Screen
        Default: =
      ProfileScreen:
        PropertyKind: Input
        DisplayName: ProfileScreen
        Description: "Reference đến ProfileScreen"
        DataType: Screen
        Default: =
      OnNavigate:
        PropertyKind: Event
        DisplayName: OnNavigate
        Description: "Sự kiện khi chuyển màn hình"
        ReturnType: None
        Default: =
        Parameters:
          - ScreenName:
              Description: "Tên màn hình"
              DataType: Text
              IsOptional: false
              Default: ="Dashboard"
      OnToggleCollapse:
        PropertyKind: Event
        DisplayName: OnToggleCollapse
        Description: "Sự kiện khi toggle collapse"
        ReturnType: None
        Default: =
    Properties:
      Height: =App.Height
      Width: =If(NavigationComponent.IsCollapsed, App.Width * 0.05, App.Width * 0.16)
    Children:
    # Navigation Background with enhanced styling
    - 'Navigation.Background':
        Control: Rectangle
        Properties:
          X: =0
          Y: =0
          Width: =Parent.Width
          Height: =Parent.Height
          Fill: =RGBA(249, 250, 251, 1)
          BorderColor: =RGBA(229, 231, 235, 1)
          BorderThickness: =1
          
    # Main Navigation Container
    - 'Navigation.Container':
        Control: GroupContainer
        Variant: ManualLayout
        Properties:
          X: =0
          Y: =0
          Width: =Parent.Width
          Height: =Parent.Height
        Children:
          # Enhanced Header Section
          - 'Navigation.Header.Background':
              Control: Rectangle
              Properties:
                X: =0
                Y: =0
                Width: =Parent.Width
                Height: =Parent.Height * 0.07
                Fill: =RGBA(255, 255, 255, 1)
                BorderColor: =RGBA(229, 231, 235, 1)
                BorderThickness: =1
                
          - 'Navigation.Header.Container':
              Control: GroupContainer
              Variant: ManualLayout
              Properties:
                X: =0
                Y: =0
                Width: =Parent.Width
                Height: =Parent.Height * 0.07
              Children:
                # Enhanced Logo Container
                - 'Navigation.Logo.Container':
                    Control: GroupContainer
                    Variant: ManualLayout
                    Properties:
                      X: =Parent.Width * 0.06
                      Y: =(Parent.Height - Self.Height) / 2
                      Width: =If(NavigationComponent.IsCollapsed, Parent.Width * 0.5, Parent.Width * 0.65)
                      Height: =Parent.Height * 0.65
                    Children:
                      - 'Navigation.Logo.Icon':
                          Control: Classic/Icon
                          Properties:
                            X: =0
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Height * 0.75
                            Height: =Parent.Height * 0.75
                            Icon: =Icon.CalendarBlank
                            Color: =RGBA(59, 130, 246, 1)
                            
                      - 'Navigation.Logo.Text':
                          Control: Label
                          Properties:
                            X: ='Navigation.Logo.Icon'.X + 'Navigation.Logo.Icon'.Width + Parent.Width * 0.06
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Width * 0.65
                            Height: =Parent.Height * 0.5
                            Text: ="Leave Management"
                            Color: =RGBA(31, 41, 55, 1)
                            Font: =Font.'Open Sans'
                            FontWeight: =FontWeight.Bold
                            Size: =10
                            Visible: =Not(NavigationComponent.IsCollapsed)
                            
                # Enhanced Toggle Button with modern design
                - 'Navigation.Toggle.Button':
                    Control: Classic/Button
                    Properties:
                      X: =Parent.Width - Self.Width - Parent.Width * 0.06
                      Y: =(Parent.Height - Self.Height) / 2
                      Width: =Parent.Height * 0.5
                      Height: =Parent.Height * 0.5
                      Text: =If(NavigationComponent.IsCollapsed, "»", "«")
                      Fill: =RGBA(249, 250, 251, 1)
                      Color: =RGBA(75, 85, 99, 1)
                      BorderColor: =RGBA(209, 213, 219, 1)
                      BorderThickness: =1
                      Font: =Font.'Open Sans'
                      FontWeight: =FontWeight.Bold
                      Size: =8
                      HoverFill: =RGBA(243, 244, 246, 1)
                      HoverColor: =RGBA(31, 41, 55, 1)
                      HoverBorderColor: =RGBA(156, 163, 175, 1)
                      PressedFill: =RGBA(229, 231, 235, 1)
                      PressedColor: =RGBA(17, 24, 39, 1)
                      OnSelect: |
                        =NavigationComponent.OnToggleCollapse()
                      
          # Enhanced Menu Items Container
          - 'Navigation.Menu.Container':
              Control: GroupContainer
              Variant: ManualLayout
              Properties:
                X: =0
                Y: ='Navigation.Header.Container'.Y + 'Navigation.Header.Container'.Height + Parent.Height * 0.005
                Width: =Parent.Width
                Height: =Parent.Height - 'Navigation.Header.Container'.Height - Parent.Height * 0.01
              Children:
                # Dashboard Menu Item with enhanced hover effects
                - 'Navigation.Menu.Dashboard.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: =Parent.Height * 0.008
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "Dashboard", 
                        RGBA(239, 246, 255, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "Dashboard", 
                        RGBA(147, 197, 253, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "Dashboard", 1, 0)

                - 'Navigation.Menu.Dashboard':
                    Control: Classic/Button
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: =Parent.Height * 0.008
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Text: =If(NavigationComponent.IsCollapsed, "", "  Dashboard")
                      Fill: =RGBA(255, 255, 255, 0)
                      Color: =If(NavigationComponent.ActiveScreen = "Dashboard", 
                        RGBA(59, 130, 246, 1), 
                        RGBA(75, 85, 99, 1))
                      BorderColor: =RGBA(255, 255, 255, 0)
                      BorderThickness: =0
                      Font: =Font.'Open Sans'
                      FontWeight: =If(NavigationComponent.ActiveScreen = "Dashboard", 
                        FontWeight.Semibold, 
                        FontWeight.Normal)
                      Size: =10
                      HoverFill: =If(NavigationComponent.ActiveScreen = "Dashboard",
                        RGBA(219, 234, 254, 1),
                        RGBA(249, 250, 251, 1))
                      HoverColor: =If(NavigationComponent.ActiveScreen = "Dashboard",
                        RGBA(37, 99, 235, 1),
                        RGBA(31, 41, 55, 1))
                      PressedFill: =If(NavigationComponent.ActiveScreen = "Dashboard",
                        RGBA(191, 219, 254, 1),
                        RGBA(243, 244, 246, 1))
                      PressedColor: =If(NavigationComponent.ActiveScreen = "Dashboard",
                        RGBA(29, 78, 216, 1),
                        RGBA(17, 24, 39, 1))
                      OnSelect: |
                        =Set(varDebugClick, "Dashboard clicked");
                        Set(varActiveScreen, "Dashboard");
                        If(Not(IsBlank(NavigationComponent.DashboardScreen)), 
                          Navigate(NavigationComponent.DashboardScreen),
                          NavigationComponent.OnNavigate("Dashboard"))
                        
                # Dashboard Icon Overlay
                - 'Navigation.Menu.Dashboard.Icon':
                    Control: Classic/Icon
                    Properties:
                      X: =Parent.Width * 0.08
                      Y: =Parent.Height * 0.03
                      Width: =Parent.Height * 0.03
                      Height: =Parent.Height * 0.03
                      Icon: =Icon.DetailList
                      Color: =If(NavigationComponent.ActiveScreen = "Dashboard", 
                        RGBA(59, 130, 246, 1), 
                        RGBA(75, 85, 99, 1))
                      
                # Leave Request Menu Item
                - 'Navigation.Menu.LeaveRequest.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: ='Navigation.Menu.Dashboard'.Y + 'Navigation.Menu.Dashboard'.Height + Parent.Height * 0.004
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 
                        RGBA(254, 242, 242, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 
                        RGBA(252, 165, 165, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 1, 0)

                - 'Navigation.Menu.LeaveRequest':
                    Control: Classic/Button
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: ='Navigation.Menu.Dashboard'.Y + 'Navigation.Menu.Dashboard'.Height + Parent.Height * 0.004
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Text: =If(NavigationComponent.IsCollapsed, "", "  Tạo đơn nghỉ phép")
                      Fill: =RGBA(255, 255, 255, 0)
                      Color: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 
                        RGBA(239, 68, 68, 1), 
                        RGBA(75, 85, 99, 1))
                      BorderColor: =RGBA(255, 255, 255, 0)
                      BorderThickness: =0
                      Font: =Font.'Open Sans'
                      FontWeight: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 
                        FontWeight.Semibold, 
                        FontWeight.Normal)
                      Size: =10
                      HoverFill: =If(NavigationComponent.ActiveScreen = "LeaveRequest",
                        RGBA(254, 226, 226, 1),
                        RGBA(249, 250, 251, 1))
                      HoverColor: =If(NavigationComponent.ActiveScreen = "LeaveRequest",
                        RGBA(220, 38, 38, 1),
                        RGBA(31, 41, 55, 1))
                      PressedFill: =If(NavigationComponent.ActiveScreen = "LeaveRequest",
                        RGBA(252, 165, 165, 1),
                        RGBA(243, 244, 246, 1))
                      PressedColor: =If(NavigationComponent.ActiveScreen = "LeaveRequest",
                        RGBA(185, 28, 28, 1),
                        RGBA(17, 24, 39, 1))
                      OnSelect: |
                        =Set(varDebugClick, "LeaveRequest clicked");
                        Set(varActiveScreen, "LeaveRequest");
                        If(Not(IsBlank(NavigationComponent.LeaveRequestScreen)), 
                          Navigate(NavigationComponent.LeaveRequestScreen),
                          NavigationComponent.OnNavigate("LeaveRequest"))
                        
                - 'Navigation.Menu.LeaveRequest.Icon':
                    Control: Classic/Icon
                    Properties:
                      X: =Parent.Width * 0.08
                      Y: ='Navigation.Menu.Dashboard'.Y + 'Navigation.Menu.Dashboard'.Height + Parent.Height * 0.02
                      Width: =Parent.Height * 0.03
                      Height: =Parent.Height * 0.03
                      Icon: =Icon.Edit
                      Color: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 
                        RGBA(239, 68, 68, 1), 
                        RGBA(75, 85, 99, 1))
                      
                # My Leaves Menu Item
                - 'Navigation.Menu.MyLeaves.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: ='Navigation.Menu.LeaveRequest'.Y + 'Navigation.Menu.LeaveRequest'.Height + Parent.Height * 0.004
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "MyLeaves", 
                        RGBA(240, 253, 244, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "MyLeaves", 
                        RGBA(134, 239, 172, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "MyLeaves", 1, 0)

                - 'Navigation.Menu.MyLeaves':
                    Control: Classic/Button
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: ='Navigation.Menu.LeaveRequest'.Y + 'Navigation.Menu.LeaveRequest'.Height + Parent.Height * 0.004
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Text: =If(NavigationComponent.IsCollapsed, "", "  Đơn nghỉ phép của tôi")
                      Fill: =RGBA(255, 255, 255, 0)
                      Color: =If(NavigationComponent.ActiveScreen = "MyLeaves", 
                        RGBA(34, 197, 94, 1), 
                        RGBA(75, 85, 99, 1))
                      BorderColor: =RGBA(255, 255, 255, 0)
                      BorderThickness: =0
                      Font: =Font.'Open Sans'
                      FontWeight: =If(NavigationComponent.ActiveScreen = "MyLeaves", 
                        FontWeight.Semibold, 
                        FontWeight.Normal)
                      Size: =10
                      HoverFill: =If(NavigationComponent.ActiveScreen = "MyLeaves",
                        RGBA(220, 252, 231, 1),
                        RGBA(249, 250, 251, 1))
                      HoverColor: =If(NavigationComponent.ActiveScreen = "MyLeaves",
                        RGBA(21, 128, 61, 1),
                        RGBA(31, 41, 55, 1))
                      PressedFill: =If(NavigationComponent.ActiveScreen = "MyLeaves",
                        RGBA(187, 247, 208, 1),
                        RGBA(243, 244, 246, 1))
                      PressedColor: =If(NavigationComponent.ActiveScreen = "MyLeaves",
                        RGBA(20, 83, 45, 1),
                        RGBA(17, 24, 39, 1))
                      OnSelect: |
                        =Set(varDebugClick, "MyLeaves clicked");
                        Set(varActiveScreen, "MyLeaves");
                        If(Not(IsBlank(NavigationComponent.MyLeavesScreen)), 
                          Navigate(NavigationComponent.MyLeavesScreen),
                          NavigationComponent.OnNavigate("MyLeaves"))
                        
                - 'Navigation.Menu.MyLeaves.Icon':
                    Control: Classic/Icon
                    Properties:
                      X: =Parent.Width * 0.08
                      Y: ='Navigation.Menu.LeaveRequest'.Y + 'Navigation.Menu.LeaveRequest'.Height + Parent.Height * 0.02
                      Width: =Parent.Height * 0.03
                      Height: =Parent.Height * 0.03
                      Icon: =Icon.Document
                      Color: =If(NavigationComponent.ActiveScreen = "MyLeaves", 
                        RGBA(34, 197, 94, 1), 
                        RGBA(75, 85, 99, 1))
                      
                # Calendar Menu Item
                - 'Navigation.Menu.Calendar.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: ='Navigation.Menu.MyLeaves'.Y + 'Navigation.Menu.MyLeaves'.Height + Parent.Height * 0.004
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "Calendar", 
                        RGBA(254, 249, 195, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "Calendar", 
                        RGBA(253, 224, 71, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "Calendar", 1, 0)

                - 'Navigation.Menu.Calendar':
                    Control: Classic/Button
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: ='Navigation.Menu.MyLeaves'.Y + 'Navigation.Menu.MyLeaves'.Height + Parent.Height * 0.004
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Text: =If(NavigationComponent.IsCollapsed, "", "  Lịch nghỉ phép")
                      Fill: =RGBA(255, 255, 255, 0)
                      Color: =If(NavigationComponent.ActiveScreen = "Calendar", 
                        RGBA(217, 119, 6, 1), 
                        RGBA(75, 85, 99, 1))
                      BorderColor: =RGBA(255, 255, 255, 0)
                      BorderThickness: =0
                      Font: =Font.'Open Sans'
                      FontWeight: =If(NavigationComponent.ActiveScreen = "Calendar", 
                        FontWeight.Semibold, 
                        FontWeight.Normal)
                      Size: =10
                      HoverFill: =If(NavigationComponent.ActiveScreen = "Calendar",
                        RGBA(254, 240, 138, 1),
                        RGBA(249, 250, 251, 1))
                      HoverColor: =If(NavigationComponent.ActiveScreen = "Calendar",
                        RGBA(180, 83, 9, 1),
                        RGBA(31, 41, 55, 1))
                      PressedFill: =If(NavigationComponent.ActiveScreen = "Calendar",
                        RGBA(253, 224, 71, 1),
                        RGBA(243, 244, 246, 1))
                      PressedColor: =If(NavigationComponent.ActiveScreen = "Calendar",
                        RGBA(146, 64, 14, 1),
                        RGBA(17, 24, 39, 1))
                      OnSelect: |
                        =Set(varDebugClick, "Calendar clicked");
                        Set(varActiveScreen, "Calendar");
                        If(Not(IsBlank(NavigationComponent.CalendarScreen)), 
                          Navigate(NavigationComponent.CalendarScreen),
                          NavigationComponent.OnNavigate("Calendar"))
                        
                - 'Navigation.Menu.Calendar.Icon':
                    Control: Classic/Icon
                    Properties:
                      X: =Parent.Width * 0.08
                      Y: ='Navigation.Menu.MyLeaves'.Y + 'Navigation.Menu.MyLeaves'.Height + Parent.Height * 0.02
                      Width: =Parent.Height * 0.03
                      Height: =Parent.Height * 0.03
                      Icon: =Icon.CalendarBlank
                      Color: =If(NavigationComponent.ActiveScreen = "Calendar", 
                        RGBA(217, 119, 6, 1), 
                        RGBA(75, 85, 99, 1))
                      
                # Management Menu Item (visible for managers)
                - 'Navigation.Menu.Management.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: ='Navigation.Menu.Calendar'.Y + 'Navigation.Menu.Calendar'.Height + Parent.Height * 0.004
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "Management", 
                        RGBA(248, 243, 255, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "Management", 
                        RGBA(196, 181, 253, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "Management", 1, 0)
                      Visible: =Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Admin", NavigationComponent.UserRole = "ADMIN")

                - 'Navigation.Menu.Management':
                    Control: Classic/Button
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: ='Navigation.Menu.Calendar'.Y + 'Navigation.Menu.Calendar'.Height + Parent.Height * 0.004
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Text: =If(NavigationComponent.IsCollapsed, "", "  Quản lý")
                      Fill: =RGBA(255, 255, 255, 0)
                      Color: =If(NavigationComponent.ActiveScreen = "Management", 
                        RGBA(147, 51, 234, 1), 
                        RGBA(75, 85, 99, 1))
                      BorderColor: =RGBA(255, 255, 255, 0)
                      BorderThickness: =0
                      Font: =Font.'Open Sans'
                      FontWeight: =If(NavigationComponent.ActiveScreen = "Management", 
                        FontWeight.Semibold, 
                        FontWeight.Normal)
                      Size: =10
                      Visible: =Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Admin", NavigationComponent.UserRole = "ADMIN")
                      HoverFill: =If(NavigationComponent.ActiveScreen = "Management",
                        RGBA(237, 233, 254, 1),
                        RGBA(249, 250, 251, 1))
                      HoverColor: =If(NavigationComponent.ActiveScreen = "Management",
                        RGBA(124, 58, 237, 1),
                        RGBA(31, 41, 55, 1))
                      PressedFill: =If(NavigationComponent.ActiveScreen = "Management",
                        RGBA(221, 214, 254, 1),
                        RGBA(243, 244, 246, 1))
                      PressedColor: =If(NavigationComponent.ActiveScreen = "Management",
                        RGBA(109, 40, 217, 1),
                        RGBA(17, 24, 39, 1))
                      OnSelect: |
                        =Set(varDebugClick, "Management clicked");
                        Set(varActiveScreen, "Management");
                        If(Not(IsBlank(NavigationComponent.ManagementScreen)), 
                          Navigate(NavigationComponent.ManagementScreen),
                          NavigationComponent.OnNavigate("Management"))
                        
                - 'Navigation.Menu.Management.Icon':
                    Control: Classic/Icon
                    Properties:
                      X: =Parent.Width * 0.08
                      Y: ='Navigation.Menu.Calendar'.Y + 'Navigation.Menu.Calendar'.Height + Parent.Height * 0.02
                      Width: =Parent.Height * 0.03
                      Height: =Parent.Height * 0.03
                      Icon: =Icon.Settings
                      Color: =If(NavigationComponent.ActiveScreen = "Management", 
                        RGBA(147, 51, 234, 1), 
                        RGBA(75, 85, 99, 1))
                      Visible: =Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Admin", NavigationComponent.UserRole = "ADMIN")

                # Approval Menu Item (visible for managers, directors, HR)
                - 'Navigation.Menu.Approval.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: =If(Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Admin", NavigationComponent.UserRole = "ADMIN"),
                        'Navigation.Menu.Management'.Y + 'Navigation.Menu.Management'.Height + Parent.Height * 0.004,
                        'Navigation.Menu.Calendar'.Y + 'Navigation.Menu.Calendar'.Height + Parent.Height * 0.004)
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "Approval", 
                        RGBA(254, 242, 242, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "Approval", 
                        RGBA(248, 113, 113, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "Approval", 1, 0)
                      Visible: =Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Director", NavigationComponent.UserRole = "HR", NavigationComponent.UserRole = "ADMIN")

                - 'Navigation.Menu.Approval':
                    Control: Classic/Button
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: =If(Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Admin", NavigationComponent.UserRole = "ADMIN"),
                        'Navigation.Menu.Management'.Y + 'Navigation.Menu.Management'.Height + Parent.Height * 0.004,
                        'Navigation.Menu.Calendar'.Y + 'Navigation.Menu.Calendar'.Height + Parent.Height * 0.004)
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Text: =If(NavigationComponent.IsCollapsed, "", "  Phê duyệt")
                      Fill: =RGBA(255, 255, 255, 0)
                      Color: =If(NavigationComponent.ActiveScreen = "Approval", 
                        RGBA(220, 38, 38, 1), 
                        RGBA(75, 85, 99, 1))
                      BorderColor: =RGBA(255, 255, 255, 0)
                      BorderThickness: =0
                      Font: =Font.'Open Sans'
                      FontWeight: =If(NavigationComponent.ActiveScreen = "Approval", 
                        FontWeight.Semibold, 
                        FontWeight.Normal)
                      Size: =10
                      Visible: =Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Director", NavigationComponent.UserRole = "HR", NavigationComponent.UserRole = "ADMIN")
                      HoverFill: =If(NavigationComponent.ActiveScreen = "Approval",
                        RGBA(254, 226, 226, 1),
                        RGBA(249, 250, 251, 1))
                      HoverColor: =If(NavigationComponent.ActiveScreen = "Approval",
                        RGBA(185, 28, 28, 1),
                        RGBA(31, 41, 55, 1))
                      PressedFill: =If(NavigationComponent.ActiveScreen = "Approval",
                        RGBA(252, 165, 165, 1),
                        RGBA(243, 244, 246, 1))
                      PressedColor: =If(NavigationComponent.ActiveScreen = "Approval",
                        RGBA(153, 27, 27, 1),
                        RGBA(17, 24, 39, 1))
                      OnSelect: |
                        =Set(varDebugClick, "Approval clicked");
                        Set(varActiveScreen, "Approval");
                        NavigationComponent.OnNavigate("Approval")
                        
                - 'Navigation.Menu.Approval.Icon':
                    Control: Classic/Icon
                    Properties:
                      X: =Parent.Width * 0.08
                      Y: =If(Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Admin", NavigationComponent.UserRole = "ADMIN"),
                        'Navigation.Menu.Management'.Y + 'Navigation.Menu.Management'.Height + Parent.Height * 0.02,
                        'Navigation.Menu.Calendar'.Y + 'Navigation.Menu.Calendar'.Height + Parent.Height * 0.02)
                      Width: =Parent.Height * 0.03
                      Height: =Parent.Height * 0.03
                      Icon: =Icon.CheckBadge
                      Color: =If(NavigationComponent.ActiveScreen = "Approval", 
                        RGBA(220, 38, 38, 1), 
                        RGBA(75, 85, 99, 1))
                      Visible: =Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Director", NavigationComponent.UserRole = "HR", NavigationComponent.UserRole = "ADMIN")

                # Reports Menu Item (visible for managers, directors, HR)
                - 'Navigation.Menu.Reports.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: ='Navigation.Menu.Approval'.Y + 'Navigation.Menu.Approval'.Height + Parent.Height * 0.004
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "Reports", 
                        RGBA(240, 253, 250, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "Reports", 
                        RGBA(110, 231, 183, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "Reports", 1, 0)
                      Visible: =Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Director", NavigationComponent.UserRole = "HR", NavigationComponent.UserRole = "ADMIN")

                - 'Navigation.Menu.Reports':
                    Control: Classic/Button
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: ='Navigation.Menu.Approval'.Y + 'Navigation.Menu.Approval'.Height + Parent.Height * 0.004
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Text: =If(NavigationComponent.IsCollapsed, "", "  Báo cáo")
                      Fill: =RGBA(255, 255, 255, 0)
                      Color: =If(NavigationComponent.ActiveScreen = "Reports", 
                        RGBA(5, 150, 105, 1), 
                        RGBA(75, 85, 99, 1))
                      BorderColor: =RGBA(255, 255, 255, 0)
                      BorderThickness: =0
                      Font: =Font.'Open Sans'
                      FontWeight: =If(NavigationComponent.ActiveScreen = "Reports", 
                        FontWeight.Semibold, 
                        FontWeight.Normal)
                      Size: =10
                      Visible: =Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Director", NavigationComponent.UserRole = "HR", NavigationComponent.UserRole = "ADMIN")
                      HoverFill: =If(NavigationComponent.ActiveScreen = "Reports",
                        RGBA(209, 250, 229, 1),
                        RGBA(249, 250, 251, 1))
                      HoverColor: =If(NavigationComponent.ActiveScreen = "Reports",
                        RGBA(4, 120, 87, 1),
                        RGBA(31, 41, 55, 1))
                      PressedFill: =If(NavigationComponent.ActiveScreen = "Reports",
                        RGBA(167, 243, 208, 1),
                        RGBA(243, 244, 246, 1))
                      PressedColor: =If(NavigationComponent.ActiveScreen = "Reports",
                        RGBA(6, 95, 70, 1),
                        RGBA(17, 24, 39, 1))
                      OnSelect: |
                        =Set(varDebugClick, "Reports clicked");
                        Set(varActiveScreen, "Reports");
                        NavigationComponent.OnNavigate("Reports")
                        
                - 'Navigation.Menu.Reports.Icon':
                    Control: Classic/Icon
                    Properties:
                      X: =Parent.Width * 0.08
                      Y: ='Navigation.Menu.Approval'.Y + 'Navigation.Menu.Approval'.Height + Parent.Height * 0.02
                      Width: =Parent.Height * 0.03
                      Height: =Parent.Height * 0.03
                      Icon: =Icon.DetailList
                      Color: =If(NavigationComponent.ActiveScreen = "Reports", 
                        RGBA(5, 150, 105, 1), 
                        RGBA(75, 85, 99, 1))
                      Visible: =Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Director", NavigationComponent.UserRole = "HR", NavigationComponent.UserRole = "ADMIN")

                # Profile Menu Item (always visible, at bottom)
                - 'Navigation.Menu.Profile.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: =If(Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Director", NavigationComponent.UserRole = "HR", NavigationComponent.UserRole = "ADMIN"),
                        'Navigation.Menu.Reports'.Y + 'Navigation.Menu.Reports'.Height + Parent.Height * 0.004,
                        If(Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Admin", NavigationComponent.UserRole = "ADMIN"),
                          'Navigation.Menu.Management'.Y + 'Navigation.Menu.Management'.Height + Parent.Height * 0.004,
                          'Navigation.Menu.Calendar'.Y + 'Navigation.Menu.Calendar'.Height + Parent.Height * 0.004))
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "Profile", 
                        RGBA(255, 247, 237, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "Profile", 
                        RGBA(251, 191, 36, 1), 
                        RGBA(255, 255, 255, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "Profile", 1, 0)

                - 'Navigation.Menu.Profile':
                    Control: Classic/Button
                    Properties:
                      X: =Parent.Width * 0.04
                      Y: =If(Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Director", NavigationComponent.UserRole = "HR", NavigationComponent.UserRole = "ADMIN"),
                        'Navigation.Menu.Reports'.Y + 'Navigation.Menu.Reports'.Height + Parent.Height * 0.004,
                        If(Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Admin", NavigationComponent.UserRole = "ADMIN"),
                          'Navigation.Menu.Management'.Y + 'Navigation.Menu.Management'.Height + Parent.Height * 0.004,
                          'Navigation.Menu.Calendar'.Y + 'Navigation.Menu.Calendar'.Height + Parent.Height * 0.004))
                      Width: =Parent.Width * 0.92
                      Height: =Parent.Height * 0.06
                      Text: =If(NavigationComponent.IsCollapsed, "", "  Hồ sơ cá nhân")
                      Fill: =RGBA(255, 255, 255, 0)
                      Color: =If(NavigationComponent.ActiveScreen = "Profile", 
                        RGBA(217, 119, 6, 1), 
                        RGBA(75, 85, 99, 1))
                      BorderColor: =RGBA(255, 255, 255, 0)
                      BorderThickness: =0
                      Font: =Font.'Open Sans'
                      FontWeight: =If(NavigationComponent.ActiveScreen = "Profile", 
                        FontWeight.Semibold, 
                        FontWeight.Normal)
                      Size: =10
                      HoverFill: =If(NavigationComponent.ActiveScreen = "Profile",
                        RGBA(254, 243, 199, 1),
                        RGBA(249, 250, 251, 1))
                      HoverColor: =If(NavigationComponent.ActiveScreen = "Profile",
                        RGBA(180, 83, 9, 1),
                        RGBA(31, 41, 55, 1))
                      PressedFill: =If(NavigationComponent.ActiveScreen = "Profile",
                        RGBA(252, 211, 77, 1),
                        RGBA(243, 244, 246, 1))
                      PressedColor: =If(NavigationComponent.ActiveScreen = "Profile",
                        RGBA(146, 64, 14, 1),
                        RGBA(17, 24, 39, 1))
                      OnSelect: |
                        =Set(varDebugClick, "Profile clicked");
                        Set(varActiveScreen, "Profile");
                        If(Not(IsBlank(NavigationComponent.ProfileScreen)), 
                          Navigate(NavigationComponent.ProfileScreen),
                          NavigationComponent.OnNavigate("Profile"))
                        
                - 'Navigation.Menu.Profile.Icon':
                    Control: Classic/Icon
                    Properties:
                      X: =Parent.Width * 0.08
                      Y: =If(Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Director", NavigationComponent.UserRole = "HR", NavigationComponent.UserRole = "ADMIN"),
                        'Navigation.Menu.Reports'.Y + 'Navigation.Menu.Reports'.Height + Parent.Height * 0.02,
                        If(Or(NavigationComponent.UserRole = "Manager", NavigationComponent.UserRole = "Admin", NavigationComponent.UserRole = "ADMIN"),
                          'Navigation.Menu.Management'.Y + 'Navigation.Menu.Management'.Height + Parent.Height * 0.02,
                          'Navigation.Menu.Calendar'.Y + 'Navigation.Menu.Calendar'.Height + Parent.Height * 0.02))
                      Width: =Parent.Height * 0.03
                      Height: =Parent.Height * 0.03
                      Icon: =Icon.Person
                      Color: =If(NavigationComponent.ActiveScreen = "Profile", 
                        RGBA(217, 119, 6, 1), 
                        RGBA(75, 85, 99, 1))
          
          # Enhanced Footer Section for collapsed state
          - 'Navigation.Footer.Container':
              Control: GroupContainer
              Variant: ManualLayout
              Properties:
                X: =0
                Y: =Parent.Height * 0.92
                Width: =Parent.Width
                Height: =Parent.Height * 0.08
              Children:
                - 'Navigation.Footer.Divider':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.1
                      Y: =0
                      Width: =Parent.Width * 0.8
                      Height: =1
                      Fill: =RGBA(229, 231, 235, 1)
                      
                - 'Navigation.Footer.Version':
                    Control: Label
                    Properties:
                      X: =0
                      Y: =Parent.Height * 0.3
                      Width: =Parent.Width
                      Height: =Parent.Height * 0.4
                      Text: =If(NavigationComponent.IsCollapsed, "v2.0", "Version 2.0")
                      Color: =RGBA(156, 163, 175, 1)
                      Font: =Font.'Open Sans'
                      Size: =If(NavigationComponent.IsCollapsed, 8, 9)
                      Align: =Align.Center

    # Mobile Overlay - Light
    - 'Navigation.Mobile.Overlay':
        Control: Rectangle
        Properties:
          X: =0
          Y: =0
          Width: =Parent.Width
          Height: =Parent.Height
          Fill: =RGBA(0, 0, 0, 0.3)
          Visible: =false
          OnSelect: |
            =Set(varMobileMenuOpen, false) 
