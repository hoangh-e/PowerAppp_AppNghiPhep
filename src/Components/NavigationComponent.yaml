ComponentDefinitions:
  NavigationComponent:
    DefinitionType: CanvasComponent
    CustomProperties:
      UserRole:
        PropertyKind: Input
        DisplayName: UserRole
        Description: "Vai trò của người dùng"
        DataType: Text
        Default: ="Employee"
      ActiveScreen:
        PropertyKind: Input
        DisplayName: ActiveScreen
        Description: "Màn hình hiện tại"
        DataType: Text
        Default: ="Dashboard"
      IsCollapsed:
        PropertyKind: Input
        DisplayName: IsCollapsed
        Description: "Trạng thái thu gọn navigation"
        DataType: Boolean
        Default: =false
      OnNavigate:
        PropertyKind: Event
        DisplayName: OnNavigate
        Description: "Sự kiện khi chuyển màn hình"
        ReturnType: None
        Default: =false
        Parameters:
          - ScreenName:
              Description: "Tên màn hình"
              DataType: Text
              IsOptional: true
              Default: ="Dashboard"
      OnToggleCollapse:
        PropertyKind: Event
        DisplayName: OnToggleCollapse
        Description: "Sự kiện khi toggle collapse"
        ReturnType: None
        Default: =false
    Properties:
      # Full height OK for navigation
      Height: =App.Height
      # 20% width cho side navigation
      Width: =App.Width * 0.2
    Children:
    # Navigation Background (Rectangle for visual only)
    - 'Navigation.Background':
        Control: Rectangle
        Properties:
          X: =0
          Y: =0
          Width: =If(NavigationComponent.IsCollapsed, Parent.Width * 0.15, Parent.Width * 0.2)
          Height: =Parent.Height
          Fill: =RGBA(248, 250, 252, 1)
          BorderColor: =RGBA(224, 224, 224, 1)
          BorderThickness: =Parent.Height * 0.0005
          Visible: =true
          
    # Navigation Container (GroupContainer for logic)
    - 'Navigation.Container':
        Control: GroupContainer
        Variant: ManualLayout
        Properties:
          X: =0
          Y: =0
          Width: =If(NavigationComponent.IsCollapsed, Parent.Width * 0.15, Parent.Width)
          Height: =Parent.Height
          Visible: =true
        Children:
          # Header Background (Rectangle for visual only)
          - 'Navigation.Header.Background':
              Control: Rectangle
              Properties:
                X: =0
                Y: =0
                Width: =Parent.Width
                Height: =Parent.Height * 0.06
                Fill: =RGBA(255, 255, 255, 1)
                BorderColor: =RGBA(224, 224, 224, 1)
                BorderThickness: =Parent.Height * 0.0005
                
          # Header Container (GroupContainer for logic)
          - 'Navigation.Header.Container':
              Control: GroupContainer
              Variant: ManualLayout
              Properties:
                X: =0
                Y: =0
                Width: =Parent.Width
                Height: =Parent.Height * 0.06
              Children:
                # Logo Container (GroupContainer for logic)
                - 'Navigation.Logo.Container':
                    Control: GroupContainer
                    Variant: ManualLayout
                    Properties:
                      X: =Parent.Width * 0.03
                      Y: =(Parent.Height - Self.Height) / 2
                      Width: =If(NavigationComponent.IsCollapsed, Parent.Width * 0.8, Parent.Width * 0.7)
                      Height: =Parent.Height * 0.6
                    Children:
                      - 'Navigation.Logo.Icon':
                          Control: Classic/Icon
                          Properties:
                            X: =0
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Height * 0.7
                            Height: =Parent.Height * 0.7
                            Icon: =Icon.CalendarBlank
                            Color: =RGBA(33, 150, 243, 1)
                            
                      - 'Navigation.Logo.Text':
                          Control: Label
                          Properties:
                            X: ='Navigation.Logo.Icon'.X + 'Navigation.Logo.Icon'.Width + Parent.Width * 0.08
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Width * 0.8
                            Height: =Parent.Height * 0.5
                            Text: ="Leave App"
                            Color: =RGBA(55, 65, 81, 1)
                            Font: =Font.'Open Sans'
                            FontWeight: =FontWeight.Semibold
                            Size: =Parent.Height * 0.28
                            Visible: =Not(NavigationComponent.IsCollapsed)
                            
                # Collapse Toggle Button
                - 'Navigation.Toggle.Button':
                    Control: Classic/Button
                    Properties:
                      X: =Parent.Width - Self.Width - Parent.Width * 0.03
                      Y: =(Parent.Height - Self.Height) / 2
                      Width: =Parent.Height * 0.5
                      Height: =Parent.Height * 0.5
                      Text: =If(NavigationComponent.IsCollapsed, "→", "←")
                      Fill: =RGBA(245, 245, 245, 1)
                      Color: =RGBA(107, 114, 128, 1)
                      BorderColor: =RGBA(224, 224, 224, 1)
                      BorderThickness: =Parent.Height * 0.001
                      Font: =Font.'Open Sans'
                      FontWeight: =FontWeight.Bold
                      Size: =Parent.Height * 0.2
                      OnSelect: |
                        =NavigationComponent.OnToggleCollapse()
                      
                # Mobile Close Button
                - 'Navigation.Mobile.CloseButton':
                    Control: Classic/Button
                    Properties:
                      X: =Parent.Width - Self.Width - Parent.Width * 0.03
                      Y: =(Parent.Height - Self.Height) / 2
                      Width: =Parent.Height * 0.5
                      Height: =Parent.Height * 0.5
                      Text: ="✕"
                      Fill: =RGBA(245, 245, 245, 1)
                      Color: =RGBA(107, 114, 128, 1)
                      BorderColor: =RGBA(224, 224, 224, 1)
                      BorderThickness: =Parent.Height * 0.001
                      Font: =Font.'Open Sans'
                      FontWeight: =FontWeight.Bold
                      Size: =Parent.Height * 0.2
                      Visible: =false
                      OnSelect: |
                        =Set(varMobileMenuOpen, false)
                      
          # Menu Items Container (GroupContainer for logic)
          - 'Navigation.Menu.Container':
              Control: GroupContainer
              Variant: ManualLayout
              Properties:
                X: =0
                Y: ='Navigation.Header.Container'.Y + 'Navigation.Header.Container'.Height
                Width: =Parent.Width
                Height: =Parent.Height - 'Navigation.Header.Container'.Height - Parent.Height * 0.05
              Children:
                # Dashboard Menu Item Background
                - 'Navigation.Menu.Dashboard.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.015
                      Y: =Parent.Height * 0.015
                      Width: =Parent.Width * 0.97
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "Dashboard", 
                        RGBA(227, 242, 253, 1), 
                        RGBA(0, 0, 0, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "Dashboard", 
                        RGBA(187, 222, 251, 1), 
                        RGBA(0, 0, 0, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "Dashboard", 
                        Parent.Width * 0.002, 
                        Parent.Width * 0.0005)

                # Dashboard Menu Item Container
                - 'Navigation.Menu.Dashboard':
                    Control: GroupContainer
                    Variant: ManualLayout
                    Properties:
                      X: =Parent.Width * 0.015
                      Y: =Parent.Height * 0.015
                      Width: =Parent.Width * 0.97
                      Height: =Parent.Height * 0.06
                    Children:
                      - 'Navigation.Menu.Dashboard.Icon':
                          Control: Classic/Icon
                          Properties:
                            X: =Parent.Width * 0.06
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Height * 0.4
                            Height: =Parent.Height * 0.4
                            Icon: =Icon.DetailList
                            Color: =If(NavigationComponent.ActiveScreen = "Dashboard", 
                              RGBA(33, 150, 243, 1), 
                              RGBA(107, 114, 128, 1))
                              
                      - 'Navigation.Menu.Dashboard.Text':
                          Control: Label
                          Properties:
                            X: ='Navigation.Menu.Dashboard.Icon'.X + 'Navigation.Menu.Dashboard.Icon'.Width + Parent.Width * 0.06
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Width * 0.7
                            Height: =Parent.Height * 0.5
                            Text: ="Dashboard"
                            Color: =If(NavigationComponent.ActiveScreen = "Dashboard", 
                              RGBA(33, 150, 243, 1), 
                              RGBA(55, 65, 81, 1))
                            Font: =Font.'Open Sans'
                            FontWeight: =If(NavigationComponent.ActiveScreen = "Dashboard", 
                              FontWeight.Semibold, 
                              FontWeight.Normal)
                            Size: =Parent.Height * 0.22
                            Visible: =Not(NavigationComponent.IsCollapsed)
                            
                      - 'Navigation.Menu.Dashboard.Button':
                          Control: Classic/Button
                          Properties:
                            X: =0
                            Y: =0
                            Width: =Parent.Width
                            Height: =Parent.Height
                            Text: =""
                            Fill: =RGBA(0, 0, 0, 0)
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderThickness: =Parent.Height * 0.001
                            OnSelect: |
                              =Set(varActiveScreen, "Dashboard")
                            
                # Leave Request Menu Item Background
                - 'Navigation.Menu.LeaveRequest.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.015
                      Y: ='Navigation.Menu.Dashboard'.Y + 'Navigation.Menu.Dashboard'.Height + Parent.Height * 0.008
                      Width: =Parent.Width * 0.97
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 
                        RGBA(252, 228, 236, 1), 
                        RGBA(0, 0, 0, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 
                        RGBA(248, 187, 208, 1), 
                        RGBA(0, 0, 0, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 
                        Parent.Width * 0.002, 
                        Parent.Width * 0.0005)

                # Leave Request Menu Item Container
                - 'Navigation.Menu.LeaveRequest':
                    Control: GroupContainer
                    Variant: ManualLayout
                    Properties:
                      X: =Parent.Width * 0.015
                      Y: ='Navigation.Menu.Dashboard'.Y + 'Navigation.Menu.Dashboard'.Height + Parent.Height * 0.008
                      Width: =Parent.Width * 0.97
                      Height: =Parent.Height * 0.06
                    Children:
                      - 'Navigation.Menu.LeaveRequest.Icon':
                          Control: Classic/Icon
                          Properties:
                            X: =Parent.Width * 0.06
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Height * 0.4
                            Height: =Parent.Height * 0.4
                            Icon: =Icon.Edit
                            Color: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 
                              RGBA(233, 30, 99, 1), 
                              RGBA(107, 114, 128, 1))
                              
                      - 'Navigation.Menu.LeaveRequest.Text':
                          Control: Label
                          Properties:
                            X: ='Navigation.Menu.LeaveRequest.Icon'.X + 'Navigation.Menu.LeaveRequest.Icon'.Width + Parent.Width * 0.06
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Width * 0.7
                            Height: =Parent.Height * 0.5
                            Text: ="Tạo đơn nghỉ phép"
                            Color: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 
                              RGBA(233, 30, 99, 1), 
                              RGBA(55, 65, 81, 1))
                            Font: =Font.'Open Sans'
                            FontWeight: =If(NavigationComponent.ActiveScreen = "LeaveRequest", 
                              FontWeight.Semibold, 
                              FontWeight.Normal)
                            Size: =Parent.Height * 0.22
                            Visible: =Not(NavigationComponent.IsCollapsed)
                            
                      - 'Navigation.Menu.LeaveRequest.Button':
                          Control: Classic/Button
                          Properties:
                            X: =0
                            Y: =0
                            Width: =Parent.Width
                            Height: =Parent.Height
                            Text: =""
                            Fill: =RGBA(0, 0, 0, 0)
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderThickness: =Parent.Height * 0.001
                            OnSelect: |
                              =Set(varActiveScreen, "LeaveRequest")
                            
                # My Leaves Menu Item Background
                - 'Navigation.Menu.MyLeaves.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.015
                      Y: ='Navigation.Menu.LeaveRequest'.Y + 'Navigation.Menu.LeaveRequest'.Height + Parent.Height * 0.008
                      Width: =Parent.Width * 0.97
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "MyLeaves", 
                        RGBA(232, 245, 233, 1), 
                        RGBA(0, 0, 0, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "MyLeaves", 
                        RGBA(200, 230, 201, 1), 
                        RGBA(0, 0, 0, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "MyLeaves", 
                        Parent.Width * 0.002, 
                        Parent.Width * 0.0005)

                # My Leaves Menu Item Container
                - 'Navigation.Menu.MyLeaves':
                    Control: GroupContainer
                    Variant: ManualLayout
                    Properties:
                      X: =Parent.Width * 0.015
                      Y: ='Navigation.Menu.LeaveRequest'.Y + 'Navigation.Menu.LeaveRequest'.Height + Parent.Height * 0.008
                      Width: =Parent.Width * 0.97
                      Height: =Parent.Height * 0.06
                    Children:
                      - 'Navigation.Menu.MyLeaves.Icon':
                          Control: Classic/Icon
                          Properties:
                            X: =Parent.Width * 0.06
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Height * 0.4
                            Height: =Parent.Height * 0.4
                            Icon: =Icon.DocumentWithContent
                            Color: =If(NavigationComponent.ActiveScreen = "MyLeaves", 
                              RGBA(76, 175, 80, 1), 
                              RGBA(107, 114, 128, 1))
                              
                      - 'Navigation.Menu.MyLeaves.Text':
                          Control: Label
                          Properties:
                            X: ='Navigation.Menu.MyLeaves.Icon'.X + 'Navigation.Menu.MyLeaves.Icon'.Width + Parent.Width * 0.06
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Width * 0.7
                            Height: =Parent.Height * 0.5
                            Text: ="Đơn nghỉ phép của tôi"
                            Color: =If(NavigationComponent.ActiveScreen = "MyLeaves", 
                              RGBA(76, 175, 80, 1), 
                              RGBA(55, 65, 81, 1))
                            Font: =Font.'Open Sans'
                            FontWeight: =If(NavigationComponent.ActiveScreen = "MyLeaves", 
                              FontWeight.Semibold, 
                              FontWeight.Normal)
                            Size: =Parent.Height * 0.22
                            Visible: =Not(NavigationComponent.IsCollapsed)
                            
                      - 'Navigation.Menu.MyLeaves.Button':
                          Control: Classic/Button
                          Properties:
                            X: =0
                            Y: =0
                            Width: =Parent.Width
                            Height: =Parent.Height
                            Text: =""
                            Fill: =RGBA(0, 0, 0, 0)
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderThickness: =Parent.Height * 0.001
                            OnSelect: |
                              =Set(varActiveScreen, "MyLeaves")
                            
                # Calendar Menu Item Background
                - 'Navigation.Menu.Calendar.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.015
                      Y: ='Navigation.Menu.MyLeaves'.Y + 'Navigation.Menu.MyLeaves'.Height + Parent.Height * 0.008
                      Width: =Parent.Width * 0.97
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "Calendar", 
                        RGBA(255, 243, 224, 1), 
                        RGBA(0, 0, 0, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "Calendar", 
                        RGBA(255, 224, 178, 1), 
                        RGBA(0, 0, 0, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "Calendar", 
                        Parent.Width * 0.002, 
                        Parent.Width * 0.0005)

                # Calendar Menu Item Container
                - 'Navigation.Menu.Calendar':
                    Control: GroupContainer
                    Variant: ManualLayout
                    Properties:
                      X: =Parent.Width * 0.015
                      Y: ='Navigation.Menu.MyLeaves'.Y + 'Navigation.Menu.MyLeaves'.Height + Parent.Height * 0.008
                      Width: =Parent.Width * 0.97
                      Height: =Parent.Height * 0.06
                    Children:
                      - 'Navigation.Menu.Calendar.Icon':
                          Control: Classic/Icon
                          Properties:
                            X: =Parent.Width * 0.06
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Height * 0.4
                            Height: =Parent.Height * 0.4
                            Icon: =Icon.CalendarBlank
                            Color: =If(NavigationComponent.ActiveScreen = "Calendar", 
                              RGBA(255, 152, 0, 1), 
                              RGBA(107, 114, 128, 1))
                              
                      - 'Navigation.Menu.Calendar.Text':
                          Control: Label
                          Properties:
                            X: ='Navigation.Menu.Calendar.Icon'.X + 'Navigation.Menu.Calendar.Icon'.Width + Parent.Width * 0.06
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Width * 0.7
                            Height: =Parent.Height * 0.5
                            Text: ="Lịch nghỉ phép"
                            Color: =If(NavigationComponent.ActiveScreen = "Calendar", 
                              RGBA(255, 152, 0, 1), 
                              RGBA(55, 65, 81, 1))
                            Font: =Font.'Open Sans'
                            FontWeight: =If(NavigationComponent.ActiveScreen = "Calendar", 
                              FontWeight.Semibold, 
                              FontWeight.Normal)
                            Size: =Parent.Height * 0.22
                            Visible: =Not(NavigationComponent.IsCollapsed)
                            
                      - 'Navigation.Menu.Calendar.Button':
                          Control: Classic/Button
                          Properties:
                            X: =0
                            Y: =0
                            Width: =Parent.Width
                            Height: =Parent.Height
                            Text: =""
                            Fill: =RGBA(0, 0, 0, 0)
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderThickness: =Parent.Height * 0.001
                            OnSelect: |
                              =Set(varActiveScreen, "Calendar")
                            
                # HR Management Menu Item (Only for HR/Admin)
                - 'Navigation.Menu.Management.Background':
                    Control: Rectangle
                    Properties:
                      X: =Parent.Width * 0.015
                      Y: ='Navigation.Menu.Calendar'.Y + 'Navigation.Menu.Calendar'.Height + Parent.Height * 0.008
                      Width: =Parent.Width * 0.97
                      Height: =Parent.Height * 0.06
                      Fill: =If(NavigationComponent.ActiveScreen = "Management", 
                        RGBA(243, 232, 255, 1), 
                        RGBA(0, 0, 0, 0))
                      BorderColor: =If(NavigationComponent.ActiveScreen = "Management", 
                        RGBA(221, 214, 254, 1), 
                        RGBA(0, 0, 0, 0))
                      BorderThickness: =If(NavigationComponent.ActiveScreen = "Management", 
                        Parent.Width * 0.002, 
                        Parent.Width * 0.0005)
                      Visible: =NavigationComponent.UserRole in ["HR", "ADMIN"]

                # HR Management Menu Item Container
                - 'Navigation.Menu.Management':
                    Control: GroupContainer
                    Variant: ManualLayout
                    Properties:
                      X: =Parent.Width * 0.015
                      Y: ='Navigation.Menu.Calendar'.Y + 'Navigation.Menu.Calendar'.Height + Parent.Height * 0.008
                      Width: =Parent.Width * 0.97
                      Height: =Parent.Height * 0.06
                      Visible: =NavigationComponent.UserRole in ["HR", "ADMIN"]
                    Children:
                      - 'Navigation.Menu.Management.Icon':
                          Control: Classic/Icon
                          Properties:
                            X: =Parent.Width * 0.06
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Height * 0.4
                            Height: =Parent.Height * 0.4
                            Icon: =Icon.Settings
                            Color: =If(NavigationComponent.ActiveScreen = "Management", 
                              RGBA(139, 92, 246, 1), 
                              RGBA(107, 114, 128, 1))
                              
                      - 'Navigation.Menu.Management.Text':
                          Control: Label
                          Properties:
                            X: ='Navigation.Menu.Management.Icon'.X + 'Navigation.Menu.Management.Icon'.Width + Parent.Width * 0.06
                            Y: =(Parent.Height - Self.Height) / 2
                            Width: =Parent.Width * 0.7
                            Height: =Parent.Height * 0.5
                            Text: ="Quản lý HR"
                            Color: =If(NavigationComponent.ActiveScreen = "Management", 
                              RGBA(139, 92, 246, 1), 
                              RGBA(55, 65, 81, 1))
                            Font: =Font.'Open Sans'
                            FontWeight: =If(NavigationComponent.ActiveScreen = "Management", 
                              FontWeight.Semibold, 
                              FontWeight.Normal)
                            Size: =Parent.Height * 0.22
                            Visible: =Not(NavigationComponent.IsCollapsed)
                            
                      - 'Navigation.Menu.Management.Button':
                          Control: Classic/Button
                          Properties:
                            X: =0
                            Y: =0
                            Width: =Parent.Width
                            Height: =Parent.Height
                            Text: =""
                            Fill: =RGBA(0, 0, 0, 0)
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderThickness: =Parent.Height * 0.001
                            OnSelect: |
                              =Set(varActiveScreen, "Management")
                            
          # Bottom Logo/Footer Section
          - 'Navigation.Footer':
              Control: GroupContainer
              Variant: ManualLayout
              Properties:
                X: =0
                Y: =Parent.Height - Self.Height
                # Fixed 75% width on mobile
                Width: =If(NavigationComponent.IsCollapsed, Parent.Width * 0.15, Parent.Width)
                Height: =Parent.Height * 0.08
              Children:
                # Company Logo/Brand
                - 'Navigation.Footer.Brand':
                    Control: GroupContainer
                    Variant: ManualLayout
                    Properties:
                      X: =Parent.Width * 0.03
                      Y: =(Parent.Height - Self.Height) / 2
                      Width: =Parent.Width * 0.94
                      Height: =Parent.Height * 0.6
                    Children:
                      - 'Navigation.Footer.Text':
                          Control: Label
                          Properties:
                            X: =0
                            Y: =0
                            Width: =Parent.Width
                            Height: =Parent.Height
                            Text: ="© 2024 Leave App"
                            Color: =RGBA(156, 163, 175, 1)
                            Font: =Font.'Open Sans'
                            Size: =Parent.Height * 0.3
                            Align: =Align.Center
                            Visible: =Not(NavigationComponent.IsCollapsed)

    # Mobile Overlay - Light
    - 'Navigation.Mobile.Overlay':
        Control: Rectangle
        Properties:
          X: =0
          Y: =0
          Width: =Parent.Width
          Height: =Parent.Height
          Fill: =RGBA(0, 0, 0, 0.3)
          Visible: =false
          OnSelect: |
            =Set(varMobileMenuOpen, false) 
