Screens:
  ManagementScreen:
    Properties:
      Fill: =RGBA(248, 250, 252, 1)
      OnVisible: |
        =Set(varActiveScreen, "Management"); 
        Set(varSelectedManagementTab, "Users");
        Set(varIsUserFormOpen, false);
        Set(varSelectedUser, Blank());
        Set(varIsEditingUser, false);
        Set(varUserFormName, "");
        Set(varUserFormEmail, "");
        Set(varUserFormRole, "");
        Set(varUserFormDepartment, "");
        Set(varUserFormStatus, "HoatDong");
        Set(varAllUsers, NguoiDung);
          Set(varAllDepartments, DonVi); 
          Set(varAllRoles, VaiTro); 
        Set(varHolidaysList, NgayLe);
        Set(varSelectedHoliday, Blank());
        Set(varIsHolidayFormOpen, false);
        Set(varHolidayFormDate, Today());
        Set(varHolidayFormName, "");
        Set(varShowImportModal, false)
    Children:
      # Header Component
      - 'Management.Header':
          Control: CanvasComponent
          ComponentName: HeaderComponent
          Properties:
            X: =0
            Y: =0
            Width: =Parent.Width
            Height: =Parent.Height * 0.065
            UserName: =UserSession.HoTen
            UserRole: =UserSession.MaVaiTro
            ShowNotification: =true
            NotificationCount: =0
            OnLogout: |
              =Set(varIsUserAuthenticated, false);
              Set(UserSession, {
                Id: "", 
                Name: "", 
                Email: "", 
                Role: "", 
                Permission: 0,
                NguoiQuanLyId: "", 
                HoTen: "", 
                MaVaiTro: "", 
                ChucDanh: "", 
                MaDonVi: "", 
                TrangThai: ""
              });
              Navigate(LoginScreen)
            
      # Navigation Component
      - 'Management.Navigation':
          Control: CanvasComponent
          ComponentName: NavigationComponent
          Properties:
            X: =0
            Y: ='Management.Header'.Height
            Width: =If(varNavCollapsed, App.Width * 0.045, App.Width * 0.14)
            Height: =Parent.Height - 'Management.Header'.Height
            UserRole: =UserSession.MaVaiTro
            ActiveScreen: ="Management"
            IsCollapsed: =varNavCollapsed
            DashboardScreen: =DashboardScreen
            LeaveRequestScreen: =LeaveRequestScreen
            MyLeavesScreen: =MyLeavesScreen
            CalendarScreen: =CalendarScreen
            ManagementScreen: =ManagementScreen
            ProfileScreen: =ProfileScreen
            OnNavigate: |
              =Set(varActiveScreen, ScreenName);
              Switch(ScreenName,
                "Dashboard", Navigate(DashboardScreen),
                "LeaveRequest", Navigate(LeaveRequestScreen),
                "MyLeaves", Navigate(MyLeavesScreen),
                "Calendar", Navigate(CalendarScreen),
                "Management", Navigate(ManagementScreen),
                "Profile", Navigate(ProfileScreen),
                "Approval", Navigate(ApprovalScreen),
                "Reports", Navigate(ReportsScreen)
              )
            OnToggleCollapse: |
              =Set(varNavCollapsed, !varNavCollapsed)
            
      # Main Content Container
      - 'Management.Content.Container':
          Control: GroupContainer
          Variant: ManualLayout
          Properties:
            X: ='Management.Navigation'.Width
            Y: ='Management.Header'.Height
            Width: =Parent.Width - 'Management.Navigation'.Width
            Height: =Parent.Height - 'Management.Header'.Height
          Children:
            - 'Management.Content.Padded':
                Control: GroupContainer
                Variant: ManualLayout
                Properties:
                  X: =Parent.Width * 0.01
                  Y: =Parent.Height * 0.01
                  Width: =Parent.Width * 0.98
                  Height: =Parent.Height * 0.98
                Children:
                  # Page Header
                  - 'Management.PageHeader.Container':
                      Control: GroupContainer
                      Variant: ManualLayout
                      Properties:
                        X: =0
                        Y: =0
                        Width: =Parent.Width
                        Height: =Parent.Height * 0.1
                      Children:
                        - 'Management.PageHeader.Background':
                            Control: Rectangle
                            Properties:
                              X: =0
                              Y: =0
                              Width: =Parent.Width
                              Height: =Parent.Height
                              Fill: =RGBA(255, 255, 255, 1)
                              BorderColor: =RGBA(226, 232, 240, 1)
                              BorderThickness: =1
                              
                        - 'Management.PageHeader.Icon':
                            Control: Classic/Icon
                            Properties:
                              X: =Parent.Width * 0.015
                              Y: =Parent.Height * 0.25
                              Width: =Parent.Height * 0.2
                              Height: =Parent.Height * 0.2
                              Icon: =Icon.Settings
                              Color: =RGBA(59, 130, 246, 1)
                              
                        - 'Management.PageHeader.Title':
                            Control: Label
                            Properties:
                              X: =Parent.Width * 0.015 + 'Management.PageHeader.Icon'.Width + Parent.Width * 0.01
                              Y: =Parent.Height * 0.2
                              Width: =Parent.Width * 0.6
                              Height: =Parent.Height * 0.35
                              Text: ="Quản lý hệ thống"
                              Color: =RGBA(17, 24, 39, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =14
                        
                        - 'Management.PageHeader.Stats':
                            Control: Label
                            Properties:
                              X: =Parent.Width * 0.015 + 'Management.PageHeader.Icon'.Width + Parent.Width * 0.01
                              Y: =Parent.Height * 0.6
                              Width: =Parent.Width * 0.6
                              Height: =Parent.Height * 0.25
                              Text: ="Quản lý người dùng, ngày phép, lịch nghỉ lễ và quy trình"
                              Color: =RGBA(75, 85, 99, 1)
                              Font: =Font.'Open Sans'
                              Size: =11

                  # Tab Navigation
                  - 'Management.Tabs.Container':
                      Control: GroupContainer
                      Variant: ManualLayout
                      Properties:
                        X: =0
                        Y: ='Management.PageHeader.Container'.Y + 'Management.PageHeader.Container'.Height + Parent.Height * 0.015
                        Width: =Parent.Width
                        Height: =Parent.Height * 0.08
                      Children:
                        - 'Management.Tabs.Background':
                            Control: Rectangle
                            Properties:
                              X: =0
                              Y: =0
                              Width: =Parent.Width
                              Height: =Parent.Height
                              Fill: =RGBA(249, 250, 251, 1)
                              BorderColor: =RGBA(226, 232, 240, 1)
                              BorderThickness: =1
                              
                  - 'Management.Tabs.Users':
                      Control: CanvasComponent
                      ComponentName: ButtonComponent
                      Properties:
                        X: =Parent.Width * 0.02
                        Y: =(Parent.Height - Self.Height) / 2
                        Width: =Parent.Width * 0.15
                        Height: =Parent.Height * 0.7
                              Text: ="Người dùng"
                              Variant: =If(varSelectedManagementTab = "Users", "Primary", "Outline")
                              Size: ="Small"
                              OnClick: |
                                =Set(varSelectedManagementTab, "Users")
                                
                        - 'Management.Tabs.LeaveBalance':
                      Control: CanvasComponent
                      ComponentName: ButtonComponent
                      Properties:
                        X: =Parent.Width * 0.18
                        Y: =(Parent.Height - Self.Height) / 2
                        Width: =Parent.Width * 0.15
                        Height: =Parent.Height * 0.7
                              Text: ="Số ngày phép"
                              Variant: =If(varSelectedManagementTab = "LeaveBalance", "Primary", "Outline")
                              Size: ="Small"
                              OnClick: |
                                =Set(varSelectedManagementTab, "LeaveBalance")
                                
                        - 'Management.Tabs.Holidays':
                      Control: CanvasComponent
                      ComponentName: ButtonComponent
                      Properties:
                        X: =Parent.Width * 0.34
                        Y: =(Parent.Height - Self.Height) / 2
                        Width: =Parent.Width * 0.15
                        Height: =Parent.Height * 0.7
                              Text: ="Ngày nghỉ lễ"
                              Variant: =If(varSelectedManagementTab = "Holidays", "Primary", "Outline")
                              Size: ="Small"
                              OnClick: |
                                =Set(varSelectedManagementTab, "Holidays")
                                
                        - 'Management.Tabs.Workflow':
                      Control: CanvasComponent
                      ComponentName: ButtonComponent
                      Properties:
                        X: =Parent.Width * 0.5
                        Y: =(Parent.Height - Self.Height) / 2
                        Width: =Parent.Width * 0.15
                        Height: =Parent.Height * 0.7
                              Text: ="Quy trình"
                              Variant: =If(varSelectedManagementTab = "Workflow", "Primary", "Outline")
                                                Size: ="Small"
                                                OnClick: |
                                =Set(varSelectedManagementTab, "Workflow")
