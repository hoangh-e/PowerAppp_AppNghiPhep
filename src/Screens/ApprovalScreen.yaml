Screens:
  ApprovalScreen:
    Properties:
      Fill: =RGBA(248, 250, 252, 1)
      OnVisible: =Set(varActiveScreen, "Approval"); Set(varPendingRequests, Table({ID: "LR002", EmployeeID: "EMP002", EmployeeName: "Tr·∫ßn Th·ªã B√¨nh", Department: "Ph√≤ng C√¥ng ngh·ªá th√¥ng tin", StartDate: "20/02/2024", EndDate: "22/02/2024", Days: 3, Type: "Ngh·ªâ ph√©p nƒÉm", Reason: "Ngh·ªâ vi·ªác c√° nh√¢n", HandoverPerson: "Nguy·ªÖn VƒÉn An", HandoverContent: "Theo d√µi ti·∫øn ƒë·ªô d·ª± √°n", CreatedDate: "15/02/2024", CurrentLevel: 1, RequiredLevel: 2, Priority: "Normal"}, {ID: "LR005", EmployeeID: "EMP001", EmployeeName: "Nguy·ªÖn VƒÉn An", Department: "Ph√≤ng C√¥ng ngh·ªá th√¥ng tin", StartDate: "25/04/2024", EndDate: "26/04/2024", Days: 2, Type: "Ngh·ªâ ph√©p nƒÉm", Reason: "Ngh·ªâ cu·ªëi tu·∫ßn d√†i", HandoverPerson: "Tr·∫ßn Th·ªã B√¨nh", HandoverContent: "Ho√†n th√†nh b√°o c√°o th√°ng", CreatedDate: "20/04/2024", CurrentLevel: 1, RequiredLevel: 2, Priority: "Normal"}, {ID: "LR006", EmployeeID: "EMP003", EmployeeName: "L√™ VƒÉn C∆∞·ªùng", Department: "Ban Gi√°m ƒë·ªëc", StartDate: "15/05/2024", EndDate: "20/05/2024", Days: 6, Type: "Ngh·ªâ ph√©p nƒÉm", Reason: "Ngh·ªâ ph√©p h√®", HandoverPerson: "Ph·∫°m Th·ªã Dung", HandoverContent: "·ª¶y quy·ªÅn quy·∫øt ƒë·ªãnh c√°c v·∫•n ƒë·ªÅ quan tr·ªçng", CreatedDate: "01/05/2024", CurrentLevel: 2, RequiredLevel: 3, Priority: "High"})); Set(varSelectedRequest, Blank()); Set(varApprovalComment, ""); Set(varApprovalAction, ""); Set(varIsProcessing, false)
    Children:
      - 'Approval.Header':
          Control: HeaderComponent
          Properties:
            X: =0
            Y: =0
            Width: =Parent.Width
            Height: =80
            Title: ="Ph√™ duy·ªát ngh·ªâ ph√©p"
            UserName: =varCurrentUser.FullName
            UserRole: =varCurrentUser.Role
            ShowNotification: =true
            NotificationCount: =CountRows(Filter(varPendingRequests, 
              If(varCurrentUser.Role = "Manager", CurrentLevel = 1, CurrentLevel = 2)))
            
      - 'Approval.Navigation':
          Control: NavigationComponent
          Properties:
            X: =0
            Y: ='Approval.Header'.Y + 'Approval.Header'.Height
            Width: =250
            Height: =Parent.Height - 'Approval.Header'.Height
            UserRole: =varCurrentUser.Role
            ActiveScreen: =varActiveScreen
            OnNavigate: =Set(varNavigateAction, true)
            
      - 'Approval.Content.Container':
          Control: GroupContainer
          Variant: ManualLayout
          Properties:
            X: ='Approval.Navigation'.X + 'Approval.Navigation'.Width
            Y: ='Approval.Header'.Y + 'Approval.Header'.Height
            Width: =Parent.Width - 'Approval.Navigation'.Width
            Height: =Parent.Height - 'Approval.Header'.Height
            Fill: =RGBA(248, 250, 252, 1)
          Children:
            - 'Approval.Content.Title':
                Control: Label
                Properties:
                  X: =Parent.X + 30
                  Y: =Parent.Y + 30
                  Width: =Parent.Width - 60
                  Height: =40
                  Text: ="Ph√™ duy·ªát ƒë∆°n ngh·ªâ ph√©p - C·∫•p " & If(varCurrentUser.Role = "Manager", "1", "2")
                  Color: =RGBA(32, 54, 71, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =FontWeight.Bold
                  Size: =24
                  
            - 'Approval.Stats.Container':
                Control: GroupContainer
                Variant: ManualLayout
                Properties:
                  X: =Parent.X + 30
                  Y: ='Approval.Content.Title'.Y + 'Approval.Content.Title'.Height + 20
                  Width: =Parent.Width - 60
                  Height: =80
                Children:
                  - 'Approval.Stats.Pending':
                      Control: StatsCardComponent
                      Properties:
                        X: =Parent.X
                        Y: =Parent.Y
                        Width: =(Parent.Width - 40) / 3
                        Height: =Parent.Height
                        Title: ="Ch·ªù ph√™ duy·ªát"
                        Value: =CountRows(Filter(varPendingRequests, 
                          If(varCurrentUser.Role = "Manager", CurrentLevel = 1, CurrentLevel = 2)))
                        Icon: ="Clock"
                        Color: =RGBA(255, 193, 7, 1)
                        Subtitle: ="ƒê∆°n c·∫ßn x·ª≠ l√Ω"
                        
                  - 'Approval.Stats.Today':
                      Control: StatsCardComponent
                      Properties:
                        X: ='Approval.Stats.Pending'.X + 'Approval.Stats.Pending'.Width + 20
                        Y: =Parent.Y
                        Width: =(Parent.Width - 40) / 3
                        Height: =Parent.Height
                        Title: ="H√¥m nay"
                        Value: =2
                        Icon: ="Calendar"
                        Color: =RGBA(0, 120, 212, 1)
                        Subtitle: ="ƒê∆°n ƒë∆∞·ª£c t·∫°o"
                        
                  - 'Approval.Stats.Urgent':
                      Control: StatsCardComponent
                      Properties:
                        X: ='Approval.Stats.Today'.X + 'Approval.Stats.Today'.Width + 20
                        Y: =Parent.Y
                        Width: =(Parent.Width - 40) / 3
                        Height: =Parent.Height
                        Title: ="∆Øu ti√™n cao"
                        Value: =CountRows(Filter(varPendingRequests, Priority = "High"))
                        Icon: ="Cancel"
                        Color: =RGBA(220, 53, 69, 1)
                        Subtitle: ="C·∫ßn x·ª≠ l√Ω g·∫•p"
                        
            - 'Approval.Main.Container':
                Control: GroupContainer
                Variant: ManualLayout
                Properties:
                  X: =Parent.X + 30
                  Y: ='Approval.Stats.Container'.Y + 'Approval.Stats.Container'.Height + 20
                  Width: =Parent.Width - 60
                  Height: =Parent.Height - 180
                Children:
                  - 'Approval.List.Container':
                      Control: GroupContainer
                      Variant: ManualLayout
                      Properties:
                        X: =Parent.X
                        Y: =Parent.Y
                        Width: =Parent.Width * 0.6
                        Height: =Parent.Height
                        Fill: =RGBA(255, 255, 255, 1)
                        BorderColor: =RGBA(230, 230, 230, 1)
                        BorderThickness: =1
                        DropShadow: =DropShadow.Light
                      Children:
                        - 'Approval.List.Title':
                            Control: Label
                            Properties:
                              X: =Parent.X + 20
                              Y: =Parent.Y + 20
                              Width: =Parent.Width - 40
                              Height: =30
                              Text: ="Danh s√°ch ƒë∆°n ch·ªù ph√™ duy·ªát"
                              Color: =RGBA(32, 54, 71, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =16
                              
                        - 'Approval.List.Gallery':
                            Control: Gallery
                            Variant: Vertical
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.List.Title'.Y + 'Approval.List.Title'.Height + 10
                              Width: =Parent.Width - 40
                              Height: =Parent.Height - 80
                              Items: =Filter(varPendingRequests, 
                                If(varCurrentUser.Role = "Manager", CurrentLevel = 1, CurrentLevel = 2))
                              TemplateSize: =120
                              TemplatePadding: =10
                            Children:
                              - 'Gallery.Request.Container':
                                  Control: GroupContainer
                                  Variant: ManualLayout
                                  Properties:
                                    X: =0
                                    Y: =0
                                    Width: =Parent.TemplateWidth
                                    Height: =Parent.TemplateHeight
                                    Fill: =If(varSelectedRequest.ID = ThisItem.ID, RGBA(240, 248, 255, 1), RGBA(248, 249, 250, 1))
                                    BorderColor: =If(varSelectedRequest.ID = ThisItem.ID, RGBA(0, 120, 212, 1), RGBA(230, 230, 230, 1))
                                    BorderThickness: =If(varSelectedRequest.ID = ThisItem.ID, 2, 1)
                                    OnSelect: =Set(varSelectedRequest, ThisItem)
                                  Children:
                                    - 'Gallery.Request.Header':
                                        Control: GroupContainer
                                        Variant: ManualLayout
                                        Properties:
                                          X: =Parent.X + 15
                                          Y: =Parent.Y + 10
                                          Width: =Parent.Width - 30
                                          Height: =25
                                        Children:
                                          - 'Gallery.Request.ID':
                                              Control: Label
                                              Properties:
                                                X: =Parent.X
                                                Y: =Parent.Y
                                                Width: =80
                                                Height: =25
                                                Text: =ThisItem.ID
                                                Color: =RGBA(0, 120, 212, 1)
                                                Font: =Font.'Open Sans'
                                                FontWeight: =FontWeight.Bold
                                                Size: =12
                                                
                                          - 'Gallery.Request.Priority':
                                              Control: Label
                                              Properties:
                                                X: =Parent.Width - Self.Width
                                                Y: =Parent.Y
                                                Width: =80
                                                Height: =25
                                                Text: =If(ThisItem.Priority = "High", "üî¥ ∆Øu ti√™n", "‚ö™ B√¨nh th∆∞·ªùng")
                                                Color: =If(ThisItem.Priority = "High", RGBA(220, 53, 69, 1), RGBA(108, 117, 125, 1))
                                                Font: =Font.'Open Sans'
                                                FontWeight: =FontWeight.Semibold
                                                Size: =10
                                                Align: =Align.Right
                                                
                                    - 'Gallery.Request.Employee':
                                        Control: Label
                                        Properties:
                                          X: =Parent.X + 15
                                          Y: ='Gallery.Request.Header'.Y + 'Gallery.Request.Header'.Height + 5
                                          Width: =Parent.Width - 30
                                          Height: =20
                                          Text: =ThisItem.EmployeeName & " - " & ThisItem.Department
                                          Color: =RGBA(32, 54, 71, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Size: =12
                                          
                                    - 'Gallery.Request.Period':
                                        Control: Label
                                        Properties:
                                          X: =Parent.X + 15
                                          Y: ='Gallery.Request.Employee'.Y + 'Gallery.Request.Employee'.Height + 2
                                          Width: =Parent.Width - 30
                                          Height: =18
                                          Text: =ThisItem.StartDate & " - " & ThisItem.EndDate & " (" & ThisItem.Days & " ng√†y)"
                                          Color: =RGBA(108, 117, 125, 1)
                                          Font: =Font.'Open Sans'
                                          Size: =11
                                          
                                    - 'Gallery.Request.Type':
                                        Control: Label
                                        Properties:
                                          X: =Parent.X + 15
                                          Y: ='Gallery.Request.Period'.Y + 'Gallery.Request.Period'.Height + 2
                                          Width: =Parent.Width - 30
                                          Height: =18
                                          Text: =ThisItem.Type & " - " & ThisItem.Reason
                                          Color: =RGBA(108, 117, 125, 1)
                                          Font: =Font.'Open Sans'
                                          Size: =10
                                          
                                    - 'Gallery.Request.CreatedDate':
                                        Control: Label
                                        Properties:
                                          X: =Parent.X + 15
                                          Y: ='Gallery.Request.Type'.Y + 'Gallery.Request.Type'.Height + 5
                                          Width: =Parent.Width - 30
                                          Height: =15
                                          Text: ="T·∫°o ng√†y: " & ThisItem.CreatedDate
                                          Color: =RGBA(134, 142, 150, 1)
                                          Font: =Font.'Open Sans'
                                          Size: =9
                                          
                  - 'Approval.Detail.Container':
                      Control: GroupContainer
                      Variant: ManualLayout
                      Properties:
                        X: ='Approval.List.Container'.X + 'Approval.List.Container'.Width + 20
                        Y: =Parent.Y
                        Width: =Parent.Width - 'Approval.List.Container'.Width - 20
                        Height: =Parent.Height
                        Fill: =RGBA(255, 255, 255, 1)
                        BorderColor: =RGBA(230, 230, 230, 1)
                        BorderThickness: =1
                        DropShadow: =DropShadow.Light
                        Visible: =Not(IsBlank(varSelectedRequest))
                      Children:
                        - 'Approval.Detail.Title':
                            Control: Label
                            Properties:
                              X: =Parent.X + 20
                              Y: =Parent.Y + 20
                              Width: =Parent.Width - 40
                              Height: =30
                              Text: ="Chi ti·∫øt ƒë∆°n ngh·ªâ ph√©p"
                              Color: =RGBA(32, 54, 71, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =16
                              
                        - 'Approval.Detail.Info.Container':
                            Control: GroupContainer
                            Variant: ManualLayout
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.Detail.Title'.Y + 'Approval.Detail.Title'.Height + 15
                              Width: =Parent.Width - 40
                              Height: =200
                              Fill: =RGBA(248, 249, 250, 1)
                            Children:
                              - 'Approval.Detail.EmployeeInfo':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X + 15
                                    Y: =Parent.Y + 15
                                    Width: =Parent.Width - 30
                                    Height: =60
                                    Text: ="üë§ " & varSelectedRequest.EmployeeName & Char(10) & "üè¢ " & varSelectedRequest.Department & Char(10) & "üìß " & varSelectedRequest.EmployeeID
                                    Color: =RGBA(32, 54, 71, 1)
                                    Font: =Font.'Open Sans'
                                    Size: =12
                                    
                              - 'Approval.Detail.LeaveInfo':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X + 15
                                    Y: ='Approval.Detail.EmployeeInfo'.Y + 'Approval.Detail.EmployeeInfo'.Height + 10
                                    Width: =Parent.Width - 30
                                    Height: =80
                                    Text: ="üìÖ Th·ªùi gian: " & varSelectedRequest.StartDate & " - " & varSelectedRequest.EndDate & Char(10) & "‚è∞ S·ªë ng√†y: " & varSelectedRequest.Days & " ng√†y" & Char(10) & "üìù Lo·∫°i: " & varSelectedRequest.Type & Char(10) & "üí¨ L√Ω do: " & varSelectedRequest.Reason
                                    Color: =RGBA(32, 54, 71, 1)
                                    Font: =Font.'Open Sans'
                                    Size: =12
                                    
                              - 'Approval.Detail.HandoverInfo':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X + 15
                                    Y: ='Approval.Detail.LeaveInfo'.Y + 'Approval.Detail.LeaveInfo'.Height + 10
                                    Width: =Parent.Width - 30
                                    Height: =40
                                    Text: ="ü§ù Ng∆∞·ªùi b√†n giao: " & varSelectedRequest.HandoverPerson & Char(10) & "üìã N·ªôi dung: " & varSelectedRequest.HandoverContent
                                    Color: =RGBA(32, 54, 71, 1)
                                    Font: =Font.'Open Sans'
                                    Size: =12
                                    
                        - 'Approval.Detail.Comment.Label':
                            Control: Label
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.Detail.Info.Container'.Y + 'Approval.Detail.Info.Container'.Height + 20
                              Width: =Parent.Width - 40
                              Height: =25
                              Text: ="√ù ki·∫øn ph√™ duy·ªát:"
                              Color: =RGBA(32, 54, 71, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Semibold
                              Size: =14
                              
                        - 'Approval.Detail.Comment.Input':
                            Control: Classic/TextInput
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.Detail.Comment.Label'.Y + 'Approval.Detail.Comment.Label'.Height + 5
                              Width: =Parent.Width - 40
                              Height: =80
                              HintText: ="Nh·∫≠p √Ω ki·∫øn ph√™ duy·ªát..."
                              Mode: =TextMode.MultiLine
                              BorderColor: =RGBA(230, 230, 230, 1)
                              Font: =Font.'Open Sans'
                              Size: =12
                              PaddingLeft: =15
                              PaddingTop: =15
                              OnChange: =Set(varApprovalComment, Self.Text)
                              
                        - 'Approval.Detail.Actions.Container':
                            Control: GroupContainer
                            Variant: ManualLayout
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.Detail.Comment.Input'.Y + 'Approval.Detail.Comment.Input'.Height + 20
                              Width: =Parent.Width - 40
                              Height: =60
                            Children:
                              - 'Approval.Detail.Approve.Button':
                                  Control: Classic/Button
                                  Properties:
                                    X: =Parent.X
                                    Y: =Parent.Y
                                    Width: =(Parent.Width - 20) / 2
                                    Height: =50
                                    Text: =If(varIsProcessing And varApprovalAction = "Approve", "ƒêang x·ª≠ l√Ω...", "‚úÖ Ph√™ duy·ªát")
                                    Fill: =RGBA(40, 167, 69, 1)
                                    Color: =RGBA(255, 255, 255, 1)
                                    Font: =Font.'Open Sans'
                                    FontWeight: =FontWeight.Semibold
                                    Size: =14
                                    DisplayMode: =If(varIsProcessing, DisplayMode.Disabled, DisplayMode.Edit)
                                    OnSelect: =Set(varIsProcessing, true); Set(varApprovalAction, "Approve"); If(Not(IsBlank(varSelectedRequest)), Notify("ƒê∆°n " & varSelectedRequest.ID & " ƒë√£ ƒë∆∞·ª£c ph√™ duy·ªát!", NotificationType.Success); Set(varPendingRequests, Filter(varPendingRequests, ID <> varSelectedRequest.ID)); Set(varSelectedRequest, Blank()); Set(varApprovalComment, ""); Set(varIsProcessing, false), Notify("Vui l√≤ng ch·ªçn ƒë∆°n c·∫ßn ph√™ duy·ªát!", NotificationType.Error); Set(varIsProcessing, false))
                                      
                              - 'Approval.Detail.Reject.Button':
                                  Control: Classic/Button
                                  Properties:
                                    X: ='Approval.Detail.Approve.Button'.X + 'Approval.Detail.Approve.Button'.Width + 20
                                    Y: =Parent.Y
                                    Width: =(Parent.Width - 20) / 2
                                    Height: =50
                                    Text: =If(varIsProcessing And varApprovalAction = "Reject", "ƒêang x·ª≠ l√Ω...", "‚ùå T·ª´ ch·ªëi")
                                    Fill: =RGBA(220, 53, 69, 1)
                                    Color: =RGBA(255, 255, 255, 1)
                                    Font: =Font.'Open Sans'
                                    FontWeight: =FontWeight.Semibold
                                    Size: =14
                                    DisplayMode: =If(varIsProcessing, DisplayMode.Disabled, DisplayMode.Edit)
                                    OnSelect: =Set(varIsProcessing, true); Set(varApprovalAction, "Reject"); If(And(Not(IsBlank(varSelectedRequest)), Not(IsBlank(varApprovalComment))), Notify("ƒê∆°n " & varSelectedRequest.ID & " ƒë√£ b·ªã t·ª´ ch·ªëi!", NotificationType.Warning); Set(varPendingRequests, Filter(varPendingRequests, ID <> varSelectedRequest.ID)); Set(varSelectedRequest, Blank()); Set(varApprovalComment, ""); Set(varIsProcessing, false), If(IsBlank(varSelectedRequest), Notify("Vui l√≤ng ch·ªçn ƒë∆°n c·∫ßn ph√™ duy·ªát!", NotificationType.Error), Notify("Vui l√≤ng nh·∫≠p l√Ω do t·ª´ ch·ªëi!", NotificationType.Error)); Set(varIsProcessing, false))
                                      
                        - 'Approval.Detail.Workflow.Container':
                            Control: GroupContainer
                            Variant: ManualLayout
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.Detail.Actions.Container'.Y + 'Approval.Detail.Actions.Container'.Height + 20
                              Width: =Parent.Width - 40
                              Height: =80
                              Fill: =RGBA(240, 248, 255, 1)
                            Children:
                              - 'Approval.Detail.Workflow.Title':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X + 15
                                    Y: =Parent.Y + 10
                                    Width: =Parent.Width - 30
                                    Height: =20
                                    Text: ="Quy tr√¨nh ph√™ duy·ªát:"
                                    Color: =RGBA(32, 54, 71, 1)
                                    Font: =Font.'Open Sans'
                                    FontWeight: =FontWeight.Semibold
                                    Size: =12
                                    
                              - 'Approval.Detail.Workflow.Steps':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X + 15
                                    Y: ='Approval.Detail.Workflow.Title'.Y + 'Approval.Detail.Workflow.Title'.Height + 5
                                    Width: =Parent.Width - 30
                                    Height: =40
                                    Text: =If(varSelectedRequest.Days <= 12, 
                                      "‚â§12 ng√†y: Manager ‚ûú Director (2 c·∫•p)" & Char(10) & "Hi·ªán t·∫°i: C·∫•p " & varSelectedRequest.CurrentLevel & " / 2",
                                      ">12 ng√†y: Manager ‚ûú Director ‚ûú Gi√°m ƒë·ªëc ƒëi·ªÅu h√†nh (3 c·∫•p)" & Char(10) & "Hi·ªán t·∫°i: C·∫•p " & varSelectedRequest.CurrentLevel & " / 3"
                                    )
                                    Color: =RGBA(0, 120, 212, 1)
                                    Font: =Font.'Open Sans'
                                    Size: =10
                                    
                  - 'Approval.NoSelection.Container':
                      Control: GroupContainer
                      Variant: ManualLayout
                      Properties:
                        X: ='Approval.List.Container'.X + 'Approval.List.Container'.Width + 20
                        Y: =Parent.Y
                        Width: =Parent.Width - 'Approval.List.Container'.Width - 20
                        Height: =Parent.Height
                        Fill: =RGBA(255, 255, 255, 1)
                        BorderColor: =RGBA(230, 230, 230, 1)
                        BorderThickness: =1
                        DropShadow: =DropShadow.Light
                        Visible: =IsBlank(varSelectedRequest)
                      Children:
                        - 'Approval.NoSelection.Message':
                            Control: Label
                            Properties:
                              X: =Parent.X + 20
                              Y: =Parent.Y + (Parent.Height / 2) - 50
                              Width: =Parent.Width - 40
                              Height: =100
                              Text: ="üìã Ch·ªçn ƒë∆°n ngh·ªâ ph√©p" & Char(10) & Char(10) & "Vui l√≤ng ch·ªçn m·ªôt ƒë∆°n ngh·ªâ ph√©p t·ª´ danh s√°ch b√™n tr√°i ƒë·ªÉ xem chi ti·∫øt v√† th·ª±c hi·ªán ph√™ duy·ªát."
                              Color: =RGBA(108, 117, 125, 1)
                              Font: =Font.'Open Sans'
                              Size: =14
                              Align: =Align.Center 