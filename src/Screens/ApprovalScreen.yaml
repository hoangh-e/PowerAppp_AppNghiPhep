Screens:
  ApprovalScreen:
    Properties:
      Fill: =RGBA(248, 250, 252, 1)
      OnVisible: |
        =Set(varActiveScreen, "Approval"); Set(varPendingRequests, Table({ID: "LR002", EmployeeID: "EMP002", EmployeeName: "Tr岷 Th峄?B矛nh", Department: "Ph貌ng C么ng ngh峄?th么ng tin", StartDate: "20/02/2024", EndDate: "22/02/2024", Days: 3, Type: "Ngh峄?ph茅p n膬m", Reason: "Ngh峄?vi峄嘽 c谩 nh芒n", HandoverPerson: "Nguy峄卬 V膬n An", HandoverContent: "Theo d玫i ti岷縩 膽峄?d峄?谩n", CreatedDate: "15/02/2024", CurrentLevel: 1, RequiredLevel: 2, Priority: "Normal"}, {ID: "LR005", EmployeeID: "EMP001", EmployeeName: "Nguy峄卬 V膬n An", Department: "Ph貌ng C么ng ngh峄?th么ng tin", StartDate: "25/04/2024", EndDate: "26/04/2024", Days: 2, Type: "Ngh峄?ph茅p n膬m", Reason: "Ngh峄?cu峄慽 tu岷 d脿i", HandoverPerson: "Tr岷 Th峄?B矛nh", HandoverContent: "Ho脿n th脿nh b谩o c谩o th谩ng", CreatedDate: "20/04/2024", CurrentLevel: 1, RequiredLevel: 2, Priority: "Normal"}, {ID: "LR006", EmployeeID: "EMP003", EmployeeName: "L锚 V膬n C瓢峄漬g", Department: "Ban Gi谩m 膽峄慶", StartDate: "15/05/2024", EndDate: "20/05/2024", Days: 6, Type: "Ngh峄?ph茅p n膬m", Reason: "Ngh峄?ph茅p h猫", HandoverPerson: "Ph岷 Th峄?Dung", HandoverContent: "峄 quy峄乶 quy岷縯 膽峄媙h c谩c v岷 膽峄?quan tr峄峮g", CreatedDate: "01/05/2024", CurrentLevel: 2, RequiredLevel: 3, Priority: "High"})); Set(varSelectedRequest, Blank()); Set(varApprovalComment, ""); Set(varApprovalAction, ""); Set(varIsProcessing, false)
    Children:
      - 'Approval.Header':
          Control: CanvasComponent
          ComponentName: HeaderComponent
          Properties:
            X: =0
            Y: =0
            Width: =Parent.Width
            Height: =80
            Title: ="Ph锚 duy峄噒 ngh峄?ph茅p"
            UserName: =varCurrentUser.FullName
            UserRole: =varCurrentUser.Role
            ShowNotification: =true
            NotificationCount: =CountRows(Filter(varPendingRequests, 
              If(varCurrentUser.Role = "Manager", CurrentLevel = 1, CurrentLevel = 2)))
            
      - 'Approval.Navigation':
          Control: CanvasComponent
          ComponentName: NavigationComponent
          Properties:
            X: =0
            Y: ='Approval.Header'.Y + 'Approval.Header'.Height
            Width: =250
            Height: =Parent.Height - 'Approval.Header'.Height
            UserRole: =varCurrentUser.Role
            ActiveScreen: =varActiveScreen
            OnNavigate: =Set(varNavigateAction, true)
            
      - 'Approval.Content.Container':
          Control: GroupContainer
          Variant: ManualLayout
          Properties:
            X: ='Approval.Navigation'.X + 'Approval.Navigation'.Width
            Y: ='Approval.Header'.Y + 'Approval.Header'.Height
            Width: =Parent.Width - 'Approval.Navigation'.Width
            Height: =Parent.Height - 'Approval.Header'.Height
            Fill: =RGBA(248, 250, 252, 1)
          Children:
            - 'Approval.Content.Title':
                Control: Label
                Properties:
                  X: =Parent.X + 30
                  Y: =Parent.Y + 30
                  Width: =Parent.Width - 60
                  Height: =40
                  Text: ="Ph锚 duy峄噒 膽啤n ngh峄?ph茅p - C岷 " & If(varCurrentUser.Role = "Manager", "1", "2")
                  Color: =RGBA(32, 54, 71, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =FontWeight.Bold
                  Size: =24
                  
            - 'Approval.Stats.Container':
                Control: GroupContainer
                Variant: ManualLayout
                Properties:
                  X: =Parent.X + 30
                  Y: ='Approval.Content.Title'.Y + 'Approval.Content.Title'.Height + 20
                  Width: =Parent.Width - 60
                  Height: =80
                Children:
                  - 'Approval.Stats.Pending':
                      Control: CanvasComponent
          ComponentName: StatsCardComponent
                      Properties:
                        X: =Parent.X
                        Y: =Parent.Y
                        Width: =(Parent.Width - 40) / 3
                        Height: =Parent.Height
                        Title: ="Ch峄?ph锚 duy峄噒"
                        Value: =CountRows(Filter(varPendingRequests, 
                          If(varCurrentUser.Role = "Manager", CurrentLevel = 1, CurrentLevel = 2)))
                        Icon: ="Clock"
                        Color: =RGBA(255, 193, 7, 1)
                        Subtitle: ="膼啤n c岷 x峄?l媒"
                        
                  - 'Approval.Stats.Today':
                      Control: CanvasComponent
          ComponentName: StatsCardComponent
                      Properties:
                        X: ='Approval.Stats.Pending'.X + 'Approval.Stats.Pending'.Width + 20
                        Y: =Parent.Y
                        Width: =(Parent.Width - 40) / 3
                        Height: =Parent.Height
                        Title: ="H么m nay"
                        Value: =2
                        Icon: ="Calendar"
                        Color: =RGBA(0, 120, 212, 1)
                        Subtitle: ="膼啤n 膽瓢峄 t岷"
                        
                  - 'Approval.Stats.Urgent':
                      Control: CanvasComponent
          ComponentName: StatsCardComponent
                      Properties:
                        X: ='Approval.Stats.Today'.X + 'Approval.Stats.Today'.Width + 20
                        Y: =Parent.Y
                        Width: =(Parent.Width - 40) / 3
                        Height: =Parent.Height
                        Title: ="漂u ti锚n cao"
                        Value: =CountRows(Filter(varPendingRequests, Priority = "High"))
                        Icon: ="Cancel"
                        Color: =RGBA(220, 53, 69, 1)
                        Subtitle: ="C岷 x峄?l媒 g岷"
                        
            - 'Approval.Main.Container':
                Control: GroupContainer
                Variant: ManualLayout
                Properties:
                  X: =Parent.X + 30
                  Y: ='Approval.Stats.Container'.Y + 'Approval.Stats.Container'.Height + 20
                  Width: =Parent.Width - 60
                  Height: =Parent.Height - 180
                Children:
                  - 'Approval.List.Container':
                      Control: GroupContainer
                      Variant: ManualLayout
                      Properties:
                        X: =Parent.X
                        Y: =Parent.Y
                        Width: =Parent.Width * 0.6
                        Height: =Parent.Height
                        Fill: =RGBA(255, 255, 255, 1)
                        BorderColor: =RGBA(230, 230, 230, 1)
                        BorderThickness: =1
                        DropShadow: =DropShadow.Light
                      Children:
                        - 'Approval.List.Title':
                            Control: Label
                            Properties:
                              X: =Parent.X + 20
                              Y: =Parent.Y + 20
                              Width: =Parent.Width - 40
                              Height: =30
                              Text: ="Danh s谩ch 膽啤n ch峄?ph锚 duy峄噒"
                              Color: =RGBA(32, 54, 71, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =16
                              
                        - 'Approval.List.Gallery':
                            Control: Gallery
                            Variant: Vertical
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.List.Title'.Y + 'Approval.List.Title'.Height + 10
                              Width: =Parent.Width - 40
                              Height: =Parent.Height - 80
                              Items: =Filter(varPendingRequests, 
                                If(varCurrentUser.Role = "Manager", CurrentLevel = 1, CurrentLevel = 2))
                              TemplateSize: =120
                              TemplatePadding: =10
                            Children:
                              - 'Gallery.Request.Container':
                                  Control: GroupContainer
                                  Variant: ManualLayout
                                  Properties:
                                    X: =0
                                    Y: =0
                                    Width: =Parent.TemplateWidth
                                    Height: =Parent.TemplateHeight
                                    Fill: =If(varSelectedRequest.ID = ThisItem.ID, RGBA(240, 248, 255, 1), RGBA(248, 249, 250, 1))
                                    BorderColor: =If(varSelectedRequest.ID = ThisItem.ID, RGBA(0, 120, 212, 1), RGBA(230, 230, 230, 1))
                                    BorderThickness: =If(varSelectedRequest.ID = ThisItem.ID, 2, 1)
                                    OnSelect: =Set(varSelectedRequest, ThisItem)
                                  Children:
                                    - 'Gallery.Request.Header':
                                        Control: GroupContainer
                                        Variant: ManualLayout
                                        Properties:
                                          X: =Parent.X + 15
                                          Y: =Parent.Y + 10
                                          Width: =Parent.Width - 30
                                          Height: =25
                                        Children:
                                          - 'Gallery.Request.ID':
                                              Control: Label
                                              Properties:
                                                X: =Parent.X
                                                Y: =Parent.Y
                                                Width: =80
                                                Height: =25
                                                Text: =ThisItem.ID
                                                Color: =RGBA(0, 120, 212, 1)
                                                Font: =Font.'Open Sans'
                                                FontWeight: =FontWeight.Bold
                                                Size: =12
                                                
                                          - 'Gallery.Request.Priority':
                                              Control: Label
                                              Properties:
                                                X: =Parent.Width - Self.Width
                                                Y: =Parent.Y
                                                Width: =80
                                                Height: =25
                                                Text: =If(ThisItem.Priority = "High", "馃敶 漂u ti锚n", "鈿?B矛nh th瓢峄漬g")
                                                Color: =If(ThisItem.Priority = "High", RGBA(220, 53, 69, 1), RGBA(108, 117, 125, 1))
                                                Font: =Font.'Open Sans'
                                                FontWeight: =FontWeight.Semibold
                                                Size: =10
                                                Align: =Align.Right
                                                
                                    - 'Gallery.Request.Employee':
                                        Control: Label
                                        Properties:
                                          X: =Parent.X + 15
                                          Y: ='Gallery.Request.Header'.Y + 'Gallery.Request.Header'.Height + 5
                                          Width: =Parent.Width - 30
                                          Height: =20
                                          Text: =ThisItem.EmployeeName & " - " & ThisItem.Department
                                          Color: =RGBA(32, 54, 71, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Size: =12
                                          
                                    - 'Gallery.Request.Period':
                                        Control: Label
                                        Properties:
                                          X: =Parent.X + 15
                                          Y: ='Gallery.Request.Employee'.Y + 'Gallery.Request.Employee'.Height + 2
                                          Width: =Parent.Width - 30
                                          Height: =18
                                          Text: =ThisItem.StartDate & " - " & ThisItem.EndDate & " (" & ThisItem.Days & " ng脿y)"
                                          Color: =RGBA(108, 117, 125, 1)
                                          Font: =Font.'Open Sans'
                                          Size: =11
                                          
                                    - 'Gallery.Request.Type':
                                        Control: Label
                                        Properties:
                                          X: =Parent.X + 15
                                          Y: ='Gallery.Request.Period'.Y + 'Gallery.Request.Period'.Height + 2
                                          Width: =Parent.Width - 30
                                          Height: =18
                                          Text: =ThisItem.Type & " - " & ThisItem.Reason
                                          Color: =RGBA(108, 117, 125, 1)
                                          Font: =Font.'Open Sans'
                                          Size: =10
                                          
                                    - 'Gallery.Request.CreatedDate':
                                        Control: Label
                                        Properties:
                                          X: =Parent.X + 15
                                          Y: ='Gallery.Request.Type'.Y + 'Gallery.Request.Type'.Height + 5
                                          Width: =Parent.Width - 30
                                          Height: =15
                                          Text: ="T岷 ng脿y:" & " " & "" & ThisItem.CreatedDate
                                          Color: =RGBA(134, 142, 150, 1)
                                          Font: =Font.'Open Sans'
                                          Size: =9
                                          
                  - 'Approval.Detail.Container':
                      Control: GroupContainer
                      Variant: ManualLayout
                      Properties:
                        X: ='Approval.List.Container'.X + 'Approval.List.Container'.Width + 20
                        Y: =Parent.Y
                        Width: =Parent.Width - 'Approval.List.Container'.Width - 20
                        Height: =Parent.Height
                        Fill: =RGBA(255, 255, 255, 1)
                        BorderColor: =RGBA(230, 230, 230, 1)
                        BorderThickness: =1
                        DropShadow: =DropShadow.Light
                        Visible: =Not(IsBlank(varSelectedRequest))
                      Children:
                        - 'Approval.Detail.Title':
                            Control: Label
                            Properties:
                              X: =Parent.X + 20
                              Y: =Parent.Y + 20
                              Width: =Parent.Width - 40
                              Height: =30
                              Text: ="Chi ti岷縯 膽啤n ngh峄?ph茅p"
                              Color: =RGBA(32, 54, 71, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =16
                              
                        - 'Approval.Detail.Info.Container':
                            Control: GroupContainer
                            Variant: ManualLayout
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.Detail.Title'.Y + 'Approval.Detail.Title'.Height + 15
                              Width: =Parent.Width - 40
                              Height: =200
                              Fill: =RGBA(248, 249, 250, 1)
                            Children:
                              - 'Approval.Detail.EmployeeInfo':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X + 15
                                    Y: =Parent.Y + 15
                                    Width: =Parent.Width - 30
                                    Height: =60
                                    Text: ="馃懁 " & varSelectedRequest.EmployeeName & Char(10) & "馃彚 " & varSelectedRequest.Department & Char(10) & "馃摟 " & varSelectedRequest.EmployeeID
                                    Color: =RGBA(32, 54, 71, 1)
                                    Font: =Font.'Open Sans'
                                    Size: =12
                                    
                              - 'Approval.Detail.LeaveInfo':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X + 15
                                    Y: ='Approval.Detail.EmployeeInfo'.Y + 'Approval.Detail.EmployeeInfo'.Height + 10
                                    Width: =Parent.Width - 30
                                    Height: =80
                                    Text: ="馃搮 Th峄漣 gian:" & " " & "" & varSelectedRequest.StartDate & " - " & varSelectedRequest.EndDate & Char(10) & "鈴?S峄?ng脿y: " & varSelectedRequest.Days & " ng脿y" & Char(10) & "馃摑 Lo岷: " & varSelectedRequest.Type & Char(10) & "馃挰 L媒 do: " & varSelectedRequest.Reason
                                    Color: =RGBA(32, 54, 71, 1)
                                    Font: =Font.'Open Sans'
                                    Size: =12
                                    
                              - 'Approval.Detail.HandoverInfo':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X + 15
                                    Y: ='Approval.Detail.LeaveInfo'.Y + 'Approval.Detail.LeaveInfo'.Height + 10
                                    Width: =Parent.Width - 30
                                    Height: =40
                                    Text: ="馃 Ng瓢峄漣 b脿n giao:" & " " & "" & varSelectedRequest.HandoverPerson & Char(10) & "馃搵 N峄檌 dung: " & varSelectedRequest.HandoverContent
                                    Color: =RGBA(32, 54, 71, 1)
                                    Font: =Font.'Open Sans'
                                    Size: =12
                                    
                        - 'Approval.Detail.Comment.Label':
                            Control: Label
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.Detail.Info.Container'.Y + 'Approval.Detail.Info.Container'.Height + 20
                              Width: =Parent.Width - 40
                              Height: =25
                              Text: ="脻 ki岷縩 ph锚 duy峄噒:"
                              Color: =RGBA(32, 54, 71, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Semibold
                              Size: =14
                              
                        - 'Approval.Detail.Comment.Input':
                            Control: Classic/TextInput
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.Detail.Comment.Label'.Y + 'Approval.Detail.Comment.Label'.Height + 5
                              Width: =Parent.Width - 40
                              Height: =80
                              HintText: ="Nh岷璸 媒 ki岷縩 ph锚 duy峄噒..."
                              Mode: =TextMode.MultiLine
                              BorderColor: =RGBA(230, 230, 230, 1)
                              Font: =Font.'Open Sans'
                              Size: =12
                              PaddingLeft: =15
                              PaddingTop: =15
                              OnChange: =Set(varApprovalComment, Self.Text)
                              
                        - 'Approval.Detail.Actions.Container':
                            Control: GroupContainer
                            Variant: ManualLayout
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.Detail.Comment.Input'.Y + 'Approval.Detail.Comment.Input'.Height + 20
                              Width: =Parent.Width - 40
                              Height: =60
                            Children:
                              - 'Approval.Detail.Approve.Button':
                                  Control: Classic/Button
                                  Properties:
                                    X: =Parent.X
                                    Y: =Parent.Y
                                    Width: =(Parent.Width - 20) / 2
                                    Height: =50
                                    Text: =If(varIsProcessing And varApprovalAction = "Approve", "膼ang x峄?l媒...", "鉁?Ph锚 duy峄噒")
                                    Fill: =RGBA(40, 167, 69, 1)
                                    Color: =RGBA(255, 255, 255, 1)
                                    Font: =Font.'Open Sans'
                                    FontWeight: =FontWeight.Semibold
                                    Size: =14
                                    DisplayMode: =If(varIsProcessing, DisplayMode.Disabled, DisplayMode.Edit)
                                    OnSelect: |
                                      =Set(varIsProcessing, true); Set(varApprovalAction, "Approve"); If(Not(IsBlank(varSelectedRequest)), Notify("膼啤n " & varSelectedRequest.ID & " 膽茫 膽瓢峄 ph锚 duy峄噒!", NotificationType.Success); Set(varPendingRequests, Filter(varPendingRequests, ID <> varSelectedRequest.ID)); Set(varSelectedRequest, Blank()); Set(varApprovalComment, ""); Set(varIsProcessing, false), Notify("Vui l貌ng ch峄峮 膽啤n c岷 ph锚 duy峄噒!", NotificationType.Error); Set(varIsProcessing, false))
                                      
                              - 'Approval.Detail.Reject.Button':
                                  Control: Classic/Button
                                  Properties:
                                    X: ='Approval.Detail.Approve.Button'.X + 'Approval.Detail.Approve.Button'.Width + 20
                                    Y: =Parent.Y
                                    Width: =(Parent.Width - 20) / 2
                                    Height: =50
                                    Text: =If(varIsProcessing And varApprovalAction = "Reject", "膼ang x峄?l媒...", "鉂?T峄?ch峄慽")
                                    Fill: =RGBA(220, 53, 69, 1)
                                    Color: =RGBA(255, 255, 255, 1)
                                    Font: =Font.'Open Sans'
                                    FontWeight: =FontWeight.Semibold
                                    Size: =14
                                    DisplayMode: =If(varIsProcessing, DisplayMode.Disabled, DisplayMode.Edit)
                                    OnSelect: |
                                      =Set(varIsProcessing, true); Set(varApprovalAction, "Reject"); If(And(Not(IsBlank(varSelectedRequest)), Not(IsBlank(varApprovalComment))), Notify("膼啤n " & varSelectedRequest.ID & " 膽茫 b峄?t峄?ch峄慽!", NotificationType.Warning); Set(varPendingRequests, Filter(varPendingRequests, ID <> varSelectedRequest.ID)); Set(varSelectedRequest, Blank()); Set(varApprovalComment, ""); Set(varIsProcessing, false), If(IsBlank(varSelectedRequest), Notify("Vui l貌ng ch峄峮 膽啤n c岷 ph锚 duy峄噒!", NotificationType.Error), Notify("Vui l貌ng nh岷璸 l媒 do t峄?ch峄慽!", NotificationType.Error)); Set(varIsProcessing, false))
                                      
                        - 'Approval.Detail.Workflow.Container':
                            Control: GroupContainer
                            Variant: ManualLayout
                            Properties:
                              X: =Parent.X + 20
                              Y: ='Approval.Detail.Actions.Container'.Y + 'Approval.Detail.Actions.Container'.Height + 20
                              Width: =Parent.Width - 40
                              Height: =80
                              Fill: =RGBA(240, 248, 255, 1)
                            Children:
                              - 'Approval.Detail.Workflow.Title':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X + 15
                                    Y: =Parent.Y + 10
                                    Width: =Parent.Width - 30
                                    Height: =20
                                    Text: ="Quy tr矛nh ph锚 duy峄噒:"
                                    Color: =RGBA(32, 54, 71, 1)
                                    Font: =Font.'Open Sans'
                                    FontWeight: =FontWeight.Semibold
                                    Size: =12
                                    
                              - 'Approval.Detail.Workflow.Steps':
                                  Control: Label
                                  Properties:
                                    X: =Parent.X + 15
                                    Y: ='Approval.Detail.Workflow.Title'.Y + 'Approval.Detail.Workflow.Title'.Height + 5
                                    Width: =Parent.Width - 30
                                    Height: =40
                                    Text: =If(varSelectedRequest.Days <= 12, 
                                      "鈮?2 ng脿y: Manager 鉃?Director (2 c岷)" & Char(10) & "Hi峄噉 t岷: C岷 " & varSelectedRequest.CurrentLevel & " / 2",
                                      ">12 ng脿y: Manager 鉃?Director 鉃?Gi谩m 膽峄慶 膽i峄乽 h脿nh (3 c岷)" & Char(10) & "Hi峄噉 t岷: C岷 " & varSelectedRequest.CurrentLevel & " / 3"
                                    )
                                    Color: =RGBA(0, 120, 212, 1)
                                    Font: =Font.'Open Sans'
                                    Size: =10
                                    
                  - 'Approval.NoSelection.Container':
                      Control: GroupContainer
                      Variant: ManualLayout
                      Properties:
                        X: ='Approval.List.Container'.X + 'Approval.List.Container'.Width + 20
                        Y: =Parent.Y
                        Width: =Parent.Width - 'Approval.List.Container'.Width - 20
                        Height: =Parent.Height
                        Fill: =RGBA(255, 255, 255, 1)
                        BorderColor: =RGBA(230, 230, 230, 1)
                        BorderThickness: =1
                        DropShadow: =DropShadow.Light
                        Visible: =IsBlank(varSelectedRequest)
                      Children:
                        - 'Approval.NoSelection.Message':
                            Control: Label
                            Properties:
                              X: =Parent.X + 20
                              Y: =Parent.Y + (Parent.Height / 2) - 50
                              Width: =Parent.Width - 40
                              Height: =100
                              Text: ="馃搵 Ch峄峮 膽啤n ngh峄?ph茅p" & Char(10) & Char(10) & "Vui l貌ng ch峄峮 m峄檛 膽啤n ngh峄?ph茅p t峄?danh s谩ch b锚n tr谩i 膽峄?xem chi ti岷縯 v脿 th峄眂 hi峄噉 ph锚 duy峄噒."
                              Color: =RGBA(108, 117, 125, 1)
                              Font: =Font.'Open Sans'
                              Size: =14
                              Align: =Align.Center 
