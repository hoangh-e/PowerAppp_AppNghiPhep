Screens:
  EnhancedDashboardScreen:
    Properties:
      Fill: =RGBA(248, 250, 252, 1)
      OnVisible: |
        =Set(varActiveScreen, "Dashboard"); 
        Set(varDemoStats, {
          TotalLeave: 12, 
          UsedLeave: 3, 
          RemainingLeave: 9, 
          PendingRequests: 2, 
          ApprovedRequests: 8, 
          RejectedRequests: 1,
          ThisMonthLeave: 1,
          NextMonthPlanned: 2
        }); 
        Set(varRecentRequests, Table(
          {ID: "LR001", Date: "2024-01-15", Days: 3, Status: "Approved", Type: "Nghỉ phép năm", Reason: "Du lịch gia đình"},
          {ID: "LR002", Date: "2024-02-20", Days: 2, Status: "Pending", Type: "Nghỉ phép năm", Reason: "Việc cá nhân"},
          {ID: "LR003", Date: "2024-03-10", Days: 1, Status: "Rejected", Type: "Nghỉ ốm", Reason: "Khám sức khỏe"},
          {ID: "LR004", Date: "2024-03-25", Days: 5, Status: "Approved", Type: "Nghỉ phép năm", Reason: "Nghỉ lễ"}
        ));
        Set(varUpcomingEvents, Table(
          {Date: "2024-04-30", Event: "Nghỉ lễ 30/4", Type: "Holiday"},
          {Date: "2024-05-01", Event: "Nghỉ lễ 1/5", Type: "Holiday"},
          {Date: "2024-05-15", Event: "Họp team", Type: "Meeting"}
        ))
    Children:
      # Enhanced Header with improved styling
      - 'Dashboard.Header':
          Control: CanvasComponent
          ComponentName: HeaderComponent_v2
          Properties:
            X: =0
            Y: =0
            Width: =Parent.Width
            Height: =If(Parent.Width < 768, Parent.Height * 0.08, Parent.Height * 0.06)
            Title: ="Leave Management System"
            UserName: =varCurrentUser.FullName
            UserRole: =varCurrentUser.Role
            ShowNotification: =true
            NotificationCount: =varDemoStats.PendingRequests
            UseGradient: =true
            
      # Enhanced Navigation with responsive design
      - 'Dashboard.Navigation':
          Control: CanvasComponent
          ComponentName: NavigationComponent
          Properties:
            X: =0
            Y: ='Dashboard.Header'.Y + 'Dashboard.Header'.Height
            Width: =If(Parent.Width < 768, 
              If(varMobileMenuOpen, Parent.Width * 0.75, Parent.Width * 0.001),
              If(varNavigationCollapsed, Parent.Width * 0.06, Parent.Width * 0.2))
            Height: =Parent.Height - 'Dashboard.Header'.Height
            UserRole: =varCurrentUser.Role
            ActiveScreen: =varActiveScreen
            IsCollapsed: =varNavigationCollapsed
            OnNavigate: =Set(varNavigateAction, true)
            OnToggleCollapse: =Set(varNavigationCollapsed, Not(varNavigationCollapsed))
            
      # Main Content Area with enhanced layout
      - 'Dashboard.Content.Container':
          Control: GroupContainer
          Variant: ManualLayout
          Properties:
            X: ='Dashboard.Navigation'.X + 'Dashboard.Navigation'.Width
            Y: ='Dashboard.Header'.Y + 'Dashboard.Header'.Height
            Width: =Parent.Width - 'Dashboard.Navigation'.Width
            Height: =Parent.Height - 'Dashboard.Header'.Height
            Fill: =RGBA(248, 250, 252, 1)
          Children:
            # Welcome Section with enhanced typography
            - 'Dashboard.Welcome.Container':
                Control: GroupContainer
                Variant: ManualLayout
                Properties:
                  X: =Parent.X + Parent.Width * 0.03
                  Y: =Parent.Y + Parent.Height * 0.03
                  Width: =Parent.Width * 0.94
                  Height: =Parent.Height * 0.12
                  Fill: =RGBA(255, 255, 255, 1)
                  BorderColor: =RGBA(224, 224, 224, 1)
                  BorderThickness: =Parent.Height * 0.001
                  DropShadow: =DropShadow.Semilight
                Children:
                  - 'Dashboard.Welcome.Icon':
                      Control: Classic/Icon
                      Properties:
                        X: =Parent.X + Parent.Width * 0.03
                        Y: =(Parent.Height - Self.Height) / 2
                        Width: =Parent.Height * 0.4
                        Height: =Parent.Height * 0.4
                        Icon: =Icon.Home
                        Color: =RGBA(33, 150, 243, 1)
                        
                  - 'Dashboard.Welcome.Title':
                      Control: Label
                      Properties:
                        X: ='Dashboard.Welcome.Icon'.X + 'Dashboard.Welcome.Icon'.Width + Parent.Width * 0.02
                        Y: =Parent.Y + Parent.Height * 0.2
                        Width: =Parent.Width * 0.7
                        Height: =Parent.Height * 0.35
                        Text: ="Chào mừng, " & varCurrentUser.FullName
                        Color: =RGBA(55, 65, 81, 1)
                        Font: =Font.'Open Sans'
                        FontWeight: =FontWeight.Bold
                        Size: =Parent.Height * 0.15
                        
                  - 'Dashboard.Welcome.Subtitle':
                      Control: Label
                      Properties:
                        X: ='Dashboard.Welcome.Icon'.X + 'Dashboard.Welcome.Icon'.Width + Parent.Width * 0.02
                        Y: ='Dashboard.Welcome.Title'.Y + 'Dashboard.Welcome.Title'.Height
                        Width: =Parent.Width * 0.7
                        Height: =Parent.Height * 0.25
                        Text: ="Tổng quan tình hình nghỉ phép và hoạt động gần đây"
                        Color: =RGBA(107, 114, 128, 1)
                        Font: =Font.'Open Sans'
                        Size: =Parent.Height * 0.1
                        
            # Enhanced Stats Cards with improved layout
            - 'Dashboard.Stats.Container':
                Control: GroupContainer
                Variant: ManualLayout
                Properties:
                  X: =Parent.X + Parent.Width * 0.03
                  Y: ='Dashboard.Welcome.Container'.Y + 'Dashboard.Welcome.Container'.Height + Parent.Height * 0.02
                  Width: =Parent.Width * 0.94
                  Height: =Parent.Height * 0.35
                  Fill: =RGBA(0, 0, 0, 0)
                Children:
                  # Primary Stats Row
                  - 'Dashboard.Stats.Primary.Row':
                      Control: GroupContainer
                      Variant: ManualLayout
                      Properties:
                        X: =Parent.X
                        Y: =Parent.Y
                        Width: =Parent.Width
                        Height: =Parent.Height * 0.48
                        Fill: =RGBA(0, 0, 0, 0)
                      Children:
                        - 'Dashboard.Stats.TotalLeave':
                            Control: CanvasComponent
                            ComponentName: EnhancedCardComponent
                            Properties:
                              X: =Parent.X
                              Y: =Parent.Y
                              Width: =(Parent.Width - Parent.Width * 0.04) / 3
                              Height: =Parent.Height
                              Title: =Text(varDemoStats.TotalLeave)
                              Subtitle: ="Tổng số ngày phép"
                              Content: ="Năm 2024 - Quyền lợi của bạn"
                              Variant: ="filled"
                              ColorScheme: ="blue"
                              ShowIcon: =true
                              Icon: ="calendar"
                              IsClickable: =true
                              OnCardClick: =Navigate(LeaveBalanceScreen)
                              
                        - 'Dashboard.Stats.UsedLeave':
                            Control: CanvasComponent
                            ComponentName: EnhancedCardComponent
                            Properties:
                              X: ='Dashboard.Stats.TotalLeave'.X + 'Dashboard.Stats.TotalLeave'.Width + Parent.Width * 0.02
                              Y: =Parent.Y
                              Width: =(Parent.Width - Parent.Width * 0.04) / 3
                              Height: =Parent.Height
                              Title: =Text(varDemoStats.UsedLeave)
                              Subtitle: ="Đã sử dụng"
                              Content: ="Ngày đã nghỉ trong năm"
                              Variant: ="filled"
                              ColorScheme: ="green"
                              ShowIcon: =true
                              Icon: ="check"
                              IsClickable: =true
                              OnCardClick: =Navigate(MyLeavesScreen)
                              
                        - 'Dashboard.Stats.RemainingLeave':
                            Control: CanvasComponent
                            ComponentName: EnhancedCardComponent
                            Properties:
                              X: ='Dashboard.Stats.UsedLeave'.X + 'Dashboard.Stats.UsedLeave'.Width + Parent.Width * 0.02
                              Y: =Parent.Y
                              Width: =(Parent.Width - Parent.Width * 0.04) / 3
                              Height: =Parent.Height
                              Title: =Text(varDemoStats.RemainingLeave)
                              Subtitle: ="Còn lại"
                              Content: ="Ngày có thể nghỉ"
                              Variant: ="filled"
                              ColorScheme: ="orange"
                              ShowIcon: =true
                              Icon: ="calendar"
                              IsClickable: =true
                              OnCardClick: =Navigate(LeaveRequestScreen)
                              
                  # Secondary Stats Row
                  - 'Dashboard.Stats.Secondary.Row':
                      Control: GroupContainer
                      Variant: ManualLayout
                      Properties:
                        X: =Parent.X
                        Y: ='Dashboard.Stats.Primary.Row'.Y + 'Dashboard.Stats.Primary.Row'.Height + Parent.Height * 0.04
                        Width: =Parent.Width
                        Height: =Parent.Height * 0.48
                        Fill: =RGBA(0, 0, 0, 0)
                      Children:
                        - 'Dashboard.Stats.PendingRequests':
                            Control: CanvasComponent
                            ComponentName: EnhancedCardComponent
                            Properties:
                              X: =Parent.X
                              Y: =Parent.Y
                              Width: =(Parent.Width - Parent.Width * 0.04) / 3
                              Height: =Parent.Height
                              Title: =Text(varDemoStats.PendingRequests)
                              Subtitle: ="Chờ phê duyệt"
                              Content: ="Đơn đang chờ xử lý"
                              Variant: ="outlined"
                              ColorScheme: ="orange"
                              ShowIcon: =true
                              Icon: ="calendar"
                              IsClickable: =true
                              OnCardClick: =Navigate(PendingRequestsScreen)
                              
                        - 'Dashboard.Stats.ApprovedRequests':
                            Control: CanvasComponent
                            ComponentName: EnhancedCardComponent
                            Properties:
                              X: ='Dashboard.Stats.PendingRequests'.X + 'Dashboard.Stats.PendingRequests'.Width + Parent.Width * 0.02
                              Y: =Parent.Y
                              Width: =(Parent.Width - Parent.Width * 0.04) / 3
                              Height: =Parent.Height
                              Title: =Text(varDemoStats.ApprovedRequests)
                              Subtitle: ="Đã phê duyệt"
                              Content: ="Đơn được chấp thuận"
                              Variant: ="outlined"
                              ColorScheme: ="green"
                              ShowIcon: =true
                              Icon: ="check"
                              IsClickable: =true
                              OnCardClick: =Navigate(ApprovedRequestsScreen)
                              
                        - 'Dashboard.Stats.RejectedRequests':
                            Control: CanvasComponent
                            ComponentName: EnhancedCardComponent
                            Properties:
                              X: ='Dashboard.Stats.ApprovedRequests'.X + 'Dashboard.Stats.ApprovedRequests'.Width + Parent.Width * 0.02
                              Y: =Parent.Y
                              Width: =(Parent.Width - Parent.Width * 0.04) / 3
                              Height: =Parent.Height
                              Title: =Text(varDemoStats.RejectedRequests)
                              Subtitle: ="Bị từ chối"
                              Content: ="Đơn không được duyệt"
                              Variant: ="outlined"
                              ColorScheme: ="red"
                              ShowIcon: =true
                              Icon: ="close"
                              IsClickable: =true
                              OnCardClick: =Navigate(RejectedRequestsScreen)
                              
            # Recent Requests Section with enhanced design
            - 'Dashboard.RecentRequests.Container':
                Control: GroupContainer
                Variant: ManualLayout
                Properties:
                  X: =Parent.X + Parent.Width * 0.03
                  Y: ='Dashboard.Stats.Container'.Y + 'Dashboard.Stats.Container'.Height + Parent.Height * 0.02
                  Width: =Parent.Width * 0.94
                  Height: =Parent.Height * 0.4
                  Fill: =RGBA(255, 255, 255, 1)
                  BorderColor: =RGBA(224, 224, 224, 1)
                  BorderThickness: =Parent.Height * 0.001
                  DropShadow: =DropShadow.Light
                Children:
                  # Section Header
                  - 'Dashboard.RecentRequests.Header':
                      Control: GroupContainer
                      Variant: ManualLayout
                      Properties:
                        X: =Parent.X + Parent.Width * 0.03
                        Y: =Parent.Y + Parent.Height * 0.05
                        Width: =Parent.Width * 0.94
                        Height: =Parent.Height * 0.15
                        Fill: =RGBA(0, 0, 0, 0)
                      Children:
                        - 'Dashboard.RecentRequests.Icon':
                            Control: Classic/Icon
                            Properties:
                              X: =Parent.X
                              Y: =(Parent.Height - Self.Height) / 2
                              Width: =Parent.Height * 0.6
                              Height: =Parent.Height * 0.6
                              Icon: =Icon.Document
                              Color: =RGBA(33, 150, 243, 1)
                              
                        - 'Dashboard.RecentRequests.Title':
                            Control: Label
                            Properties:
                              X: ='Dashboard.RecentRequests.Icon'.X + 'Dashboard.RecentRequests.Icon'.Width + Parent.Width * 0.02
                              Y: =(Parent.Height - Self.Height) / 2
                              Width: =Parent.Width * 0.6
                              Height: =Parent.Height * 0.6
                              Text: ="Đơn nghỉ phép gần đây"
                              Color: =RGBA(55, 65, 81, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =Parent.Height * 0.25
                              
                        - 'Dashboard.RecentRequests.ViewAll':
                            Control: CanvasComponent
                            ComponentName: EnhancedButtonComponent
                            Properties:
                              X: =Parent.Width - Self.Width
                              Y: =(Parent.Height - Self.Height) / 2
                              Width: =Parent.Width * 0.25
                              Height: =Parent.Height * 0.8
                              Text: ="Xem tất cả"
                              Variant: ="outline"
                              Size: ="sm"
                              Icon: ="forward"
                              OnClick: =Navigate(MyLeavesScreen)
                              
                  # Requests List
                  - 'Dashboard.RecentRequests.List':
                      Control: Gallery
                      Variant: Vertical
                      Properties:
                        X: =Parent.X + Parent.Width * 0.03
                        Y: ='Dashboard.RecentRequests.Header'.Y + 'Dashboard.RecentRequests.Header'.Height + Parent.Height * 0.02
                        Width: =Parent.Width * 0.94
                        Height: =Parent.Height * 0.75
                        Items: =varRecentRequests
                        TemplateSize: =Self.Height / 4
                        TemplatePadding: =5
                      Children:
                        - 'RequestItem.Container':
                            Control: GroupContainer
                            Variant: ManualLayout
                            Properties:
                              X: =Parent.TemplateX
                              Y: =Parent.TemplateY
                              Width: =Parent.TemplateWidth
                              Height: =Parent.TemplateHeight
                              Fill: =RGBA(248, 250, 252, 1)
                              BorderColor: =RGBA(229, 231, 235, 1)
                              BorderThickness: =Parent.Height * 0.002
                            Children:
                              - 'RequestItem.StatusIndicator':
                                  Control: Rectangle
                                  Properties:
                                    X: =Parent.X
                                    Y: =Parent.Y
                                    Width: =Parent.Width * 0.01
                                    Height: =Parent.Height
                                    Fill: =Switch(ThisItem.Status,
                                      "Approved", RGBA(76, 175, 80, 1),
                                      "Pending", RGBA(255, 193, 7, 1),
                                      "Rejected", RGBA(239, 68, 68, 1),
                                      RGBA(107, 114, 128, 1))
                                    BorderThickness: =0
                                    
                              - 'RequestItem.Content':
                                  Control: GroupContainer
                                  Variant: ManualLayout
                                  Properties:
                                    X: ='RequestItem.StatusIndicator'.X + 'RequestItem.StatusIndicator'.Width + Parent.Width * 0.02
                                    Y: =Parent.Y + Parent.Height * 0.1
                                    Width: =Parent.Width * 0.85
                                    Height: =Parent.Height * 0.8
                                    Fill: =RGBA(0, 0, 0, 0)
                                  Children:
                                    - 'RequestItem.ID':
                                        Control: Label
                                        Properties:
                                          X: =Parent.X
                                          Y: =Parent.Y
                                          Width: =Parent.Width * 0.2
                                          Height: =Parent.Height * 0.4
                                          Text: =ThisItem.ID
                                          Color: =RGBA(55, 65, 81, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Size: =Parent.Height * 0.15
                                          
                                    - 'RequestItem.Type':
                                        Control: Label
                                        Properties:
                                          X: ='RequestItem.ID'.X + 'RequestItem.ID'.Width
                                          Y: =Parent.Y
                                          Width: =Parent.Width * 0.3
                                          Height: =Parent.Height * 0.4
                                          Text: =ThisItem.Type
                                          Color: =RGBA(107, 114, 128, 1)
                                          Font: =Font.'Open Sans'
                                          Size: =Parent.Height * 0.12
                                          
                                    - 'RequestItem.Date':
                                        Control: Label
                                        Properties:
                                          X: ='RequestItem.Type'.X + 'RequestItem.Type'.Width
                                          Y: =Parent.Y
                                          Width: =Parent.Width * 0.25
                                          Height: =Parent.Height * 0.4
                                          Text: =ThisItem.Date
                                          Color: =RGBA(107, 114, 128, 1)
                                          Font: =Font.'Open Sans'
                                          Size: =Parent.Height * 0.12
                                          
                                    - 'RequestItem.Status':
                                        Control: Label
                                        Properties:
                                          X: ='RequestItem.Date'.X + 'RequestItem.Date'.Width
                                          Y: =Parent.Y
                                          Width: =Parent.Width * 0.25
                                          Height: =Parent.Height * 0.4
                                          Text: =Switch(ThisItem.Status,
                                            "Approved", "Đã duyệt",
                                            "Pending", "Chờ duyệt",
                                            "Rejected", "Từ chối",
                                            ThisItem.Status)
                                          Color: =Switch(ThisItem.Status,
                                            "Approved", RGBA(76, 175, 80, 1),
                                            "Pending", RGBA(255, 193, 7, 1),
                                            "Rejected", RGBA(239, 68, 68, 1),
                                            RGBA(107, 114, 128, 1))
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Size: =Parent.Height * 0.12
                                          
                                    - 'RequestItem.Reason':
                                        Control: Label
                                        Properties:
                                          X: =Parent.X
                                          Y: =Parent.Y + Parent.Height * 0.5
                                          Width: =Parent.Width * 0.7
                                          Height: =Parent.Height * 0.4
                                          Text: =ThisItem.Reason
                                          Color: =RGBA(107, 114, 128, 1)
                                          Font: =Font.'Open Sans'
                                          Size: =Parent.Height * 0.1
                                          
                                    - 'RequestItem.Days':
                                        Control: Label
                                        Properties:
                                          X: =Parent.Width * 0.75
                                          Y: =Parent.Y + Parent.Height * 0.5
                                          Width: =Parent.Width * 0.25
                                          Height: =Parent.Height * 0.4
                                          Text: =ThisItem.Days & " ngày"
                                          Color: =RGBA(55, 65, 81, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Size: =Parent.Height * 0.12
                                          Align: =Align.Right 